<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>JavaWeb 之 Jsp 指南 | REAI</title><meta name="keywords" content="Java,JavaWeb,JSP"><meta name="author" content="REAI"><meta name="copyright" content="REAI"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="JavaWeb 之 Jsp 指南"><meta name="application-name" content="JavaWeb 之 Jsp 指南"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="JavaWeb 之 Jsp 指南"><meta property="og:url" content="https://blog.reaicc.com/posts/javajsp/index.html"><meta property="og:site_name" content="REAI"><meta property="og:description" content="JavaWeb 之 Jsp 指南简介什么是 Java Server PagesJSP全称Java Server Pages，是一种动态网页开发技术。 它使用 JSP 标签在 HTML 网页中插入 Java 代码。标签通常以&amp;lt;%开头以%&amp;gt;结束。 JSP 是一种 Java servlet，主"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://q1.qlogo.cn/g?b=qq&amp;nk=2877406366&amp;s=640"><meta property="article:author" content="REAI"><meta property="article:tag" content="REAI,reai,博客,技术博客,程序员,程序员博客,编程,代码,开源,IT,互联网,前后端,前端,后端,设计,设计模式,数据结构,算法,面试,学习,读书,读书笔记,笔记,笔记软件,笔记系统,笔记工具,笔记方法"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://q1.qlogo.cn/g?b=qq&amp;nk=2877406366&amp;s=640"><meta name="description" content="JavaWeb 之 Jsp 指南简介什么是 Java Server PagesJSP全称Java Server Pages，是一种动态网页开发技术。 它使用 JSP 标签在 HTML 网页中插入 Java 代码。标签通常以&amp;lt;%开头以%&amp;gt;结束。 JSP 是一种 Java servlet，主"><link rel="shortcut icon" href="/img/Cat.svg"><link rel="canonical" href="https://blog.reaicc.com/posts/javajsp/"><link rel="preconnect" href="//npm.onmicrosoft.cn"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="codeva-7zzTxzlayy"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://npm.onmicrosoft.cn/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.onmicrosoft.cn/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"REAI","mode":"tianli","switchBtn":true,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"J3BBucxpYNx1hMr4pl1j","Referer":"https://blog.reaicc.com/"},
  diytitle: undefined,
  LA51: {"enable":true,"ck":"JrxUXpJaHkoUhitk","LingQueMonitorID":"JrxcoymH8UkasaaS"},
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: REAI","link":"链接: ","source":"来源: REAI","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://npm.onmicrosoft.cn/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://npm.onmicrosoft.cn/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'REAI',
  title: 'JavaWeb 之 Jsp 指南',
  postAI: '',
  pageFillDescription: 'JavaWeb 之 Jsp 指南, 简介, 什么是 Java Server Pages, 为什么使用 JSP, JSP 的优势, JSP 工作原理, JSP 工作流程, 工作步骤, JSP 生命周期, JSP 编译, JSP 初始化, JSP 执行, JSP 清理, 语法, 脚本, 中文编码问题, JSP 声明, JSP 表达式, JSP 注释, 控制语句, if…else 语句, switch…case 语句, 循环语句, JSP 字面量, 指令, Page 指令, 属性, Include 指令, Taglib 指令, JSP 动作元素, 常见的属性, ltjspincludegt, ltjspuseBeangt, ltjspsetPropertygt, ltjspgetPropertygt, ltjspforwardgt, ltjspplugingt, ltjspelementgt 、 ltjspattributegt、ltjspbodygt, ltjsptextgt, JSP 隐式对象, request 对象, response 对象, out 对象, session 对象, application 对象, config 对象, pageContext 对象, page 对象, exception 对象, EL 表达式, 一个简单的语法, EL 中的基础操作符, JSP EL 中的函数, JSP EL 隐含对象, pageContext 对象, Scope 对象, param 和 paramValues 对象, header 和 headerValues 对象, JSTL, JSTL 库安装, 核心标签, 格式化标签, SQL 标签, XML 标签, JSTL 函数, Taglib, JSP 自定义标签, 创建Hello标签, 访问标签体, 自定义标签属性之指南简介什么是全称是一种动态网页开发技术它使用标签在网页中插入代码标签通常以开头以结束是一种主要用于实现应用程序的用户界面部分网页开发者们通过结合代码代码元素以及嵌入操作和命令来编写通过网页表单获取用户输入数据访问数据库及其他数据源然后动态地创建网页标签有多种功能比如访问数据库记录用户选择信息访问组件等还可以在不同的网页中传递控制信息和共享信息为什么使用也是一种因此能够完成能完成的任何工作程序与程序有着相似的功能但和程序相比程序有如下优势性能更加优越因为可以直接在网页中动态嵌入元素而不需要单独引用文件服务器调用的是已经编译好的文件而不像那样必须先载入解释器和目标脚本基于因此拥有各种强大的企业级包括等等页面可以与处理业务逻辑的一起使用这种模式被模板引擎所支持最后是不可或缺的一部分是一个完整的企业级应用平台这意味着可以用最简单的方式来实现最复杂的应用的优势以下列出了使用带来的其他好处与相比有两大优势首先动态部分用编写而不是或其他专用语言所以更加强大与易用第二点就是易于移植到非平台上与纯相比可以很方便的编写或者修改网页而不用去面对大量的语句与相比无法使用表单数据无法进行数据库链接与相比虽然可以在客户端动态生成但是很难与服务器交互因此不能提供复杂的服务比如访问数据库和图像处理等等与静态相比静态不包含动态信息工作原理是一种但工作方式和有所差别是先将源代码编译为文件后部署到服务器下的先编译后部署是先将源代码部署到服务器再编译先部署后编译会在客户端第一次请求文件时被编译为类的一个子类该类会被服务器临时存放在服务器工作目录里所以第一次请求后访问速度会变快就是这个道理工作流程网络服务器需要一个引擎也就是一个容器来处理页面容器负责截获对页面的请求本教程使用内嵌容器的来支持开发容器与服务器协同合作为的正常运行提供必要的运行环境和其他服务并且能够正确识别专属于网页的特殊元素下图显示了容器和文件在应用中所处的位置工作步骤以下步骤表明了服务器是如何使用来创建网页的就像其他普通的网页一样您的浏览器发送一个请求给服务器服务器识别出这是一个对网页的请求并且将该请求传递给引擎通过使用或者文件来完成引擎从磁盘中载入文件然后将它们转化为这种转化只是简单地将所有模板文本改用语句并且将所有的元素转化成代码引擎将编译成可执行类并且将原始请求传递给引擎服务器的某组件将会调用引擎然后载入并执行类在执行过程中产生格式的输出并将其内嵌于中上交给服务器服务器以静态网页的形式将返回到您的浏览器中最终浏览器处理中动态产生的网页就好像在处理静态网页一样以上提及到的步骤可以用下图来表示一般情况下引擎会检查文件对应的是否已经存在并且检查文件的修改日期是否早于如果文件的修改日期早于对应的那么容器就可以确定文件没有被修改过并且有效这使得整个流程与其他脚本语言比如相比要高效快捷一些生命周期理解底层功能的关键就是去理解它们所遵守的生命周期生命周期就是从创建到销毁的整个过程类似于生命周期区别在于生命周期还包括将文件编译成以下是生命周期中所走过的几个阶段编译阶段容器编译源文件生成类初始化阶段加载与对应的类创建其实例并调用它的初始化方法执行阶段调用与对应的实例的服务方法销毁阶段调用与对应的实例的销毁方法然后销毁实例很明显生命周期的四个主要阶段和生命周期非常相似下面给出图示编译当浏览器请求页面时引擎会首先去检查是否需要编译这个文件如果这个文件没有被编译过或者在上次编译后被更改过则编译这个文件编译的过程包括三个步骤解析文件将文件转为编译初始化容器载入文件后它会在为请求提供任何服务前调用方法如果您需要执行自定义的初始化任务复写方法就行了就像下面这样初始化代码一般来讲程序只初始化一次也是如此通常情况下您可以在方法中初始化数据库连接打开文件和创建查询表执行这一阶段描述了生命周期中一切与请求相关的交互行为直到被销毁当网页完成初始化后引擎将会调用方法方法需要一个对象和一个对象作为它的参数就像下面这样服务端处理代码方法在每个中被调用一次并且负责产生与之相对应的并且它还负责产生所有个方法的回应比如等等清理生命周期的销毁阶段描述了当一个网页从容器中被移除时所发生的一切方法在中等价于中的销毁方法当您需要执行任何清理工作时复写方法比如释放数据库连接或者关闭文件夹等等方法的格式如下清理代码语法脚本脚本程序可以包含任意量的语句变量方法或表达式只要它们在脚本语言中是有效的脚本程序的语法格式代码片段或者您也可以编写与其等价的语句就像下面这样代码片段任何文本标签元素必须写在脚本程序的外面下面给出一个示例同时也是本教程的第一个示例注意请确保已经安装在目录下并且运行环境已经正确设置将以上代码保存在中然后将它放置在目录下打开浏览器并在地址栏中输入运行后得到以下结果中文编码问题如果我们要在页面正常显示中文我们需要在文件头部添加以下代码接下来我们将以上程序修改为菜鸟教程你的地址这样中文就可以正常显示了声明一个声明语句可以声明一个或多个变量方法供后面的代码使用在文件中您必须先声明这些变量和方法然后才能使用它们声明的语法格式或者您也可以编写与其等价的语句就像下面这样代码片段程序示例表达式一个表达式中包含的脚本语言表达式先被转化成然后插入到表达式出现的地方由于表达式的值会被转化成所以您可以在一个文本行中使用表达式而不用去管它是否是标签表达式元素中可以包含任何符合语言规范的表达式但是不能使用分号来结束表达式表达式的语法格式表达式同样您也可以编写与之等价的语句表达式程序示例菜鸟教程今天的日期是运行后得到以下结果今天的日期是注释注释主要有两个作用为代码作注释以及将某段代码注释掉注释的语法格式注释示例该部分注释在网页中不会被显示今天的日期是运行后得到以下结果今天的日期是不同情况下使用注释的语法规则语法描述注释注释注释内容不会被发送至浏览器甚至不会被编译注释注释通过浏览器查看网页源代码时可以看见注释内容代表静态常量代表静态常量在属性中使用的单引号在属性中使用的双引号控制语句提供对语言的全面支持您可以在程序中使用甚至建立代码块包括判断语句和循环语句等等语句块请看下面这个例子语法示例实例今天是周末今天不是周末运行后得到以下结果实例今天不是周末语句现在来看看块与块有很大的不同它使用并且整个都装在脚本程序的标签中就像下面这样语法示例示例星期天星期一星期二星期三星期四星期五星期六浏览器访问运行后得出以下结果实例星期三循环语句在程序中可以使用的三个基本循环类型和让我们来看看循环的例子以下输出的不同字体大小的菜鸟教程菜鸟教程循环实例菜鸟教程运行后得到以下结果将上例改用循环来写菜鸟教程循环实例菜鸟教程浏览器访问输出结果为初始化为所以多输出了一行运算符支持所有逻辑和算术运算符下表罗列出了常见运算符优先级从高到底类别操作符结合性后缀点运算符左到右一元右到左可乘性左到右可加性左到右移位左到右关系左到右相等不等左到右位与左到右位异或左到右位或左到右逻辑与左到右逻辑或左到右条件判断右到左赋值右到左逗号左到右字面量语言定义了以下几个字面量布尔值和整型与中的一样浮点型与中的一样字符串以单引号或双引号开始和结束指令指令用来设置整个页面相关的属性如网页的编码方式和脚本语言指令以开开始以结束指令语法格式如下指令可以有很多个属性它们以键值对的形式存在并用逗号隔开中的三种指令标签指令描述定义网页依赖属性比如脚本语言页面缓存需求等等包含其他文件引入标签库的定义可以是自定义标签指令指令为容器提供当前页面的使用说明一个页面可以包含多个指令指令的语法格式等价的格式例属性下表列出与指令相关的属性属性描述指定对象使用缓冲区的大小控制对象的缓存区指定当前页面的类型和字符编码指定当页面发生异常时需要转向的错误处理页面指定当前页面是否可以作为另一个页面的错误处理页面指定从哪一个类继承导入要使用的类定义页面的描述信息指定对页面的访问是否为线程安全定义页面所用的脚本语言默认是指定页面是否使用指定是否执行表达式确定脚本元素能否被使用指令可以通过指令来包含其他文件被包含的文件可以是文件文件或文本文件包含的文件就好像是该文件的一部分会被同时编译执行指令的语法格式如下文件相对地址指令中的文件名实际上是一个相对的地址如果您没有给文件关联一个路径编译器默认在当前路径下寻找等价的语法文件相对地址指令允许用户自定义标签一个自定义标签库就是自定义标签的集合指令引入一个自定义标签集合的定义包括库路径自定义标签指令的语法属性确定标签库的位置属性指定标签库的前缀等价的语法动作元素动作元素是一组内置的标签只需要书写很少的标记代码就能使用提供的丰富功能动作元素是对常用的功能的抽象与封装包括两种自定义动作元素与标准动作元素与指令元素不同的是动作元素在请求处理阶段起作用动作元素是用语法写成的利用动作可以动态地插入文件重用组件把用户重定向到另外的页面为插件生成代码动作元素只有一种语法它符合标准动作元素基本上都是预定义的函数规范定义了一系列的标准动作它用作为前缀可用的标准动作元素如下语法描述在页面被请求的时候引入一个文件寻找或者实例化一个设置的属性输出某个的属性把请求转到一个新的页面根据浏览器类型为插件生成或标记定义动态元素设置动态定义的元素属性设置动态定义的元素内容在页面和文档中使用写入文本的模板常见的属性所有的动作要素都有两个属性属性和属性属性属性是动作元素的唯一标识可以在页面中引用动作元素创建的值可以通过来调用属性该属性用于识别动作元素的生命周期属性和属性有直接关系属性定义了相关联对象的寿命属性有四个可能的值和用来包含静态和动态的文件该动作把指定文件插入正在生成的页面如果被包含的文件为程序则会先执行程序再将执行结果包含进来语法格式如下相对地址前面已经介绍过指令它是在文件被转换成的时候引入文件而这里的动作不同插入文件的时间是在页面被请求的时候以下是动作相关的属性列表属性描述包含在页面中的相对地址布尔属性定义在包含资源前是否刷新缓存区示例以下我们定义了两个文件和代码如下所示文件代码今天的日期是文件代码菜鸟教程动作实例现在将以上两个文件放在服务器的根目录下访问文件显示结果如下动作实例今天的日期是动作用来加载一个将在页面中使用的这个功能非常有用因为它使得我们可以发挥组件复用的优势动作最简单的语法为在类载入后我们既可以通过和动作来修改和检索的属性以下是动作相关的属性列表属性描述指定的完整包名指定将引用该对象变量的类型通过的方法指定的名字在给出具体实例前让我们先来看下和动作元素用来设置已经实例化的对象的属性有两种用法首先你可以在元素的外面后面使用如下所示此时不管是找到了一个现有的还是新创建了一个实例都会执行第二种用法是把放入元素的内部如下所示此时只有在新建实例时才会执行如果是使用现有实例则不执行动作有下面四个属性如下表属性描述属性是必需的它表示要设置属性的是哪个属性是必需的它表示要设置哪个属性有一个特殊用法如果的值是表示所有名字和属性名字匹配的请求参数都将被传递给相应的属性方法属性是可选的该属性用来指定属性的值字符串数据会在目标类中通过标准的方法自动转换成数字例如和类型的属性值比如通过转换和类型的属性值比如通过转换和不能同时使用但可以使用其中任意一个是可选的它指定用哪个请求参数作为属性的值如果当前请求没有参数则什么事情也不做系统不会把传递给属性的方法因此你可以让自己提供默认属性值只有当请求参数明确指定了新值时才修改默认属性值动作提取指定属性的值转换成字符串然后输出语法格式如下下表是与相关联的属性属性描述要检索的属性名称必须已定义表示要提取属性的值实例以下实例我们使用了菜鸟教程编译以上实例文件编译完成后会在当前目录下生成一个文件将该文件拷贝至当前项目的下包路径没有需要手动创建下面是一个中目录结构图下面是一个很简单的例子它的功能是装载一个然后设置读取它的属性现在让我们在文件中调用该菜鸟教程使用实例菜鸟教程输出信息浏览器访问执行以上文件输出如下所示动作把请求转到另外的页面标记只有一个属性语法格式如下所示相对地址以下是相关联的属性属性描述属性包含的是一个相对的值既可以直接给出也可以在请求的时候动态计算可以是一个页面或者一个实例以下实例我们使用了两个文件分别是和文件代码如下今天的日期是文件代码菜鸟教程动作实例现在将以上两个文件放在服务器的根目录下访问文件显示结果如下今天的日期是动作用来根据浏览器的类型插入通过插件运行所必需的或元素如果需要的插件不存在它会下载插件然后执行组件组件可以是一个或一个动作有多个对应元素的属性用于格式化组件元素可用于向或传递参数以下是使用动作元素的典型实例如果你有兴趣可以尝试使用来测试动作元素元素是一个新元素在组件出现故障的错误是发送给用户错误信息动作元素动态定义元素动态是非常重要的这就意味着元素在编译时是动态生成的而非静态以下实例动态定义了元素菜鸟教程属性值元素的主体浏览器访问以下页面输出结果如下所示动作元素允许在页面和文档中使用写入文本的模板语法格式如下模板数据以上文本模板不能包含其他元素只能只能包含文本和表达式注表达式将在后续章节中介绍请注意在文件中您不能使用表达式如因为符号是非法的你可以使用表达式或者嵌入在一个部分的值如果你需要在中声明必须使用到动作元素实例如下你可以对以上实例尝试使用及不使用该动作元素执行结果的区别隐式对象隐式对象是容器为每个页面提供的对象开发者可以直接使用它们而不用显式声明隐式对象也被称为预定义变量所支持的九大隐式对象对象描述类的实例类的实例类的实例用于把结果输出至网页上类的实例类的实例与应用上下文有关类的实例类的实例提供对页面所有对象以及命名空间的访问类似于类中的关键字类的对象代表发生错误的页面中对应的异常对象对象对象是类的实例每当客户端请求一个页面时引擎就会制造一个新的对象来代表这个请求对象提供了一系列方法来获取头信息方法等等对象对象是类的实例当服务器创建对象时会同时创建用于响应这个客户端的对象对象也定义了处理头模块的接口通过这个对象开发者们可以添加新的时间戳状态码等等对象对象是类的实例用来在对象中写入内容最初的类对象根据页面是否有缓存来进行不同的实例化操作可以在指令中使用属性来轻松关闭缓存类包含了大部分类中的方法不过新增了一些专为处理缓存而设计的方法还有就是类会抛出异常而不会下表列出了我们将会用来输出等类型数据的重要方法方法描述输出类型的值输出类型的值然后换行刷新输出流对象对象是类的实例和中的对象有一样的行为对象用来跟踪在各个客户端请求间的会话对象对象直接包装了的类的对象是类的实例这个对象在页面的整个生命周期中都代表着这个页面这个对象在页面初始化时被创建随着方法的调用而被移除通过向中添加属性则所有组成您应用的文件都能访问到这些属性对象对象是类的实例直接包装了的类的对象这个对象允许开发者访问或者引擎的初始化参数比如文件路径等以下是对象的使用方法不是很重要所以不常用它返回包含在元素中的名字注意元素在文件中定义对象对象是类的实例用来代表整个页面这个对象主要用来访问页面信息同时过滤掉大部分实现细节这个对象存储了对象和对象的引用对象对象对象对象可以通过访问这个对象的属性来导出对象也包含了传给页面的指令信息包括缓存信息页面等类定义了一些字段包括它也提供了余种方法有一半继承自类其中一个重要的方法就是它可接受一个或两个参数比如移除四个中相关属性但是下面这种方法只移除特定中的相关属性对象这个对象就是页面实例的引用它可以被看做是整个页面的代表对象就是对象的同义词对象对象包装了从先前页面中抛出的异常信息它通常被用来产生对出错条件的适当响应表达式表达式是用括起来的脚本用来更方便地读取对象表达式写在的代码中而不能写在与引起的脚本中表达式语言使得访问存储在中的数据变得非常简单既可以用来创建算术表达式也可以用来创建逻辑表达式在表达式内可以使用整型数浮点数字符串常量还有一个简单的语法典型的当您需要在标签中指定一个属性值时只需要简单地使用字符串即可允许您指定一个表达式来表示属性值一个简单的表达式语法如下其中指的是表达式在中通用的操作符是和这两个操作符允许您通过内嵌的对象访问各种各样的属性举例来说上面的标签可以使用表达式语言改写成如下形式当编译器在属性中见到格式后它会产生代码来计算这个表达式并且产生一个替代品来代替表达式的值您也可以在标签的模板文本中使用表达式语言比如标签简单地将其主体中的文本插入到输出中现在在标签主体中使用表达式就像这样在表达式中可以使用圆括号来组织子表达式比如等于但是等于想要停用对表达式的评估的话需要使用指令将属性值设为这样表达式就会被忽略若设为则容器将会计算表达式中的基础操作符表达式支持大部分所提供的算术和逻辑操作符操作符描述访问一个属性或者一个映射条目访问一个数组或者链表的元素组织一个子表达式以改变优先级加减或负乘除取模测试是否相等测试是否不等测试是否小于测试是否大于测试是否小于等于测试是否大于等于测试逻辑与测试逻辑或测试取反测试是否空值中的函数允许您在表达式中使用函数这些函数必须被定义在自定义标签库中函数的使用语法如下指的是命名空间指的是函数的名称指的是第一个参数指的是第二个参数以此类推比如有函数在库中定义可以像下面这样来获取一个字符串的长度要使用任何标签库中的函数您需要将这些库安装在服务器中然后使用标签在文件中包含这些库隐含对象支持下表列出的隐含对象隐含对象描述作用域作用域作用域作用域对象的参数字符串对象的参数字符串集合信息头字符串信息头字符串集合上下文初始化参数值当前页面的您可以在表达式中使用这些对象就像使用变量一样接下来会给出几个例子来更好的理解这个概念对象对象是中对象的引用通过对象您可以访问对象比如访问对象传入的查询字符串就像这样对象变量用来访问存储在各个作用域层次的变量举例来说如果您需要显式访问在层的变量可以这样来访问和对象和对象用来访问参数值通过使用方法和方法举例来说访问一个名为的参数可以这样使用表达式或者接下来的例子表明了如何访问中的参数对象返回单一的字符串而对象则返回一个字符串数组和对象和对象用来访问信息头通过使用方法和方法举例来说要访问一个名为的信息头可以这样使用表达式或者接下来的例子表明了如何访问信息头运行结果如下对象返回单一值而则返回一个字符串数组标准标签库是一个标签集合它封装了应用的通用核心功能支持通用的结构化的任务比如迭代条件判断文档操作国际化标签标签除了这些它还提供了一个框架来使用集成的自定义标签根据标签所提供的功能可以将其分为个类别核心标签格式化标签标签标签函数库安装安装库步骤如下从的标准标签库中下载的二进包官方下载地址本站下载地址下载包并解压将下的两个文件和文件拷贝到下将下的需要引入的文件复制到目录下接下来我们在文件中添加以下配置使用任何库你必须在每个文件中的头部包含标签核心标签核心标签是最常用的标签引用核心标签库的语法如下标签描述用于在中显示数据就像用于保存数据用于删除数据用来处理产生错误的异常状况并且将错误信息储存起来与我们在一般程序中用的一样本身只当做和的父标签的子标签用来判断条件是否成立的子标签接在标签后当标签判断为时被执行检索一个绝对或相对然后将其内容暴露给页面基础迭代标签接受多种集合类型根据指定的分隔符来分隔内容并迭代输出用来给包含或重定向的页面传递参数重定向至一个新的使用可选的查询参数来创造一个格式化标签格式化标签用来格式化并输出文本日期时间数字引用格式化标签库的语法如下标签描述使用指定的格式或精度格式化数字解析一个代表着数字货币或百分比的字符串使用指定的风格或模式格式化日期和时间解析一个代表着日期或时间的字符串绑定资源指定地区绑定资源指定时区指定时区显示资源配置文件信息设置的字符编码标签标签库提供了与关系型数据库等等进行交互的标签引用标签库的语法如下标签描述指定数据源运行查询语句运行更新语句将语句中的参数设为指定值将语句中的日期参数设为指定的对象值在共享数据库连接中提供嵌套的数据库行为元素将所有语句以一个事务的形式来运行标签标签库提供了创建和操作文档的标签引用标签库的语法如下在使用标签前你必须将和的相关包拷贝至你的安装目录下下载地址下载地址标签描述与类似不过只用于表达式解析数据设置表达式判断表达式若为真则执行本体中的内容否则跳过本体迭代文档中的节点和的父标签的子标签用来进行条件判断的子标签当判断为时被执行将转换应用在文档中与共同使用用于设置样式表函数包含一系列标准函数大部分是通用的字符串处理函数引用函数库的语法如下函数描述测试输入的字符串是否包含指定的子串测试输入的字符串是否包含指定的子串大小写不敏感测试输入的字符串是否以指定的后缀结尾跳过可以作为标记的字符返回指定字符串在输入字符串中出现的位置将数组中的元素合成一个字符串然后输出返回字符串长度将输入字符串中指定的位置替换为指定的字符串然后返回将字符串用指定的分隔符分隔然后组成一个子字符串数组并返回测试输入字符串是否以指定的前缀开始返回字符串的子集返回字符串在指定子串之后的子集返回字符串在指定子串之前的子集将字符串中的字符转为小写将字符串中的字符转为大写移除首尾的空白符自定义标签自定义标签是用户定义的语言元素当页面包含一个自定义标签时将被转化为标签转化为对被称为的对象的操作即当执行时调用那些操作标签扩展可以让你创建新的标签并且可以直接插入到一个页面规范中引入来编写这些自定义标记你可以继承类并重写的方法来开发一个最简单的自定义标签创建标签接下来我们想创建一个自定义标签叫作标签格式为要创建自定义的标签你首先必须创建处理标签的类所以让我们创建一个类如下所示以下代码重写了方法方法中使用了方法来获取当前的对象并将传递给对象编译以上类并将其复制到环境变量目录中最后创建如下标签库安装目录接下来我们就可以在文件中使用标签以上程序输出结果为访问标签体你可以像标准标签库一样在标签中包含消息内容如我们要在我们自定义的中包含内容格式如下我们可以修改标签处理类文件代码如下接下来我们需要修改文件如下所示现在我们可以在使用修改后的标签如下所示以上程序输出结果如下所示自定义标签属性你可以在自定义标准中设置各种属性要接收属性值自定义标签类必须实现方法中的方法如下所示从属性中使用消息从内容体中使用消息属性的名称是所以方法是的现在让我们在文件中使用的元素添加此属性现在我们就可以在文件中使用属性了如下所示以上实例数据输出结果为你还可以包含以下属性属性描述定义属性的名称每个标签的是属性名称必须是唯一的指定属性是否是必须的或者可选的如果设置为为可选声明在运行表达式时标签属性是否有效定义该属性的类类型默认指定为描述信息如果声明了该属性属性值将被视为一个以下是指定相关的属性实例如果你使用了两个属性修改文件如下所示',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-04-18 21:22:44',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/about-tag.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-article-double-row-kx/assets/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@1.0.17/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script async src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://q1.qlogo.cn/g?b=qq&amp;nk=2877406366&amp;s=640"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://npm.onmicrosoft.cn/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://npm.onmicrosoft.cn/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://music.reaicc.com/" title="网易云音乐"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/wangyiyun.png" alt="网易云音乐"/><span class="back-menu-item-text">网易云音乐</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://news.reaicc.com/" title="每日早报"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://news.reaicc.com/favicon.svg" alt="每日早报"/><span class="back-menu-item-text">每日早报</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">REAI</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/friends/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/?id=6709358233&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/notice/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 时间轴</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/img/reward/wechat.jpg" target="_blank"><img class="post-qr-code-img" alt="wechat" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/reward/wechat.jpg"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/reward/alipay.jpg" target="_blank"><img class="post-qr-code-img" alt="alipay" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/reward/alipay.jpg"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Ant/" style="font-size: 1.05rem;">Ant<sup>1</sup></a><a href="/tags/Cookie/" style="font-size: 1.05rem;">Cookie<sup>2</sup></a><a href="/tags/Dozer/" style="font-size: 1.05rem;">Dozer<sup>1</sup></a><a href="/tags/Filter/" style="font-size: 1.05rem;">Filter<sup>1</sup></a><a href="/tags/Freemark/" style="font-size: 1.05rem;">Freemark<sup>1</sup></a><a href="/tags/Freenom/" style="font-size: 1.05rem;">Freenom<sup>1</sup></a><a href="/tags/HTTPS/" style="font-size: 1.05rem;">HTTPS<sup>1</sup></a><a href="/tags/Html/" style="font-size: 1.05rem;">Html<sup>1</sup></a><a href="/tags/JSP/" style="font-size: 1.05rem;">JSP<sup>1</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>39</sup></a><a href="/tags/JavaBean/" style="font-size: 1.05rem;">JavaBean<sup>2</sup></a><a href="/tags/JavaWeb/" style="font-size: 1.05rem;">JavaWeb<sup>11</sup></a><a href="/tags/Jetty/" style="font-size: 1.05rem;">Jetty<sup>2</sup></a><a href="/tags/Jsoup/" style="font-size: 1.05rem;">Jsoup<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>8</sup></a><a href="/tags/Listener/" style="font-size: 1.05rem;">Listener<sup>1</sup></a><a href="/tags/Lombok/" style="font-size: 1.05rem;">Lombok<sup>1</sup></a><a href="/tags/Maven/" style="font-size: 1.05rem;">Maven<sup>6</sup></a><a href="/tags/Mybatis-Plus/" style="font-size: 1.05rem;">Mybatis Plus<sup>1</sup></a><a href="/tags/Reflections/" style="font-size: 1.05rem;">Reflections<sup>1</sup></a><a href="/tags/Servlet/" style="font-size: 1.05rem;">Servlet<sup>2</sup></a><a href="/tags/Session/" style="font-size: 1.05rem;">Session<sup>1</sup></a><a href="/tags/Thumbnailator/" style="font-size: 1.05rem;">Thumbnailator<sup>1</sup></a><a href="/tags/Thymeleaf/" style="font-size: 1.05rem;">Thymeleaf<sup>1</sup></a><a href="/tags/Tomcat/" style="font-size: 1.05rem;">Tomcat<sup>6</sup></a><a href="/tags/Velocity/" style="font-size: 1.05rem;">Velocity<sup>1</sup></a><a href="/tags/ZXing/" style="font-size: 1.05rem;">ZXing<sup>1</sup></a><a href="/tags/css/" style="font-size: 1.05rem;">css<sup>1</sup></a><a href="/tags/flex/" style="font-size: 1.05rem;">flex<sup>1</sup></a><a href="/tags/git/" style="font-size: 1.05rem;">git<sup>1</sup></a><a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 1.05rem;">反射<sup>1</sup></a><a href="/tags/%E5%9B%BE%E5%BD%A2%E5%A4%84%E7%90%86/" style="font-size: 1.05rem;">图形处理<sup>1</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7%E5%8C%85/" style="font-size: 1.05rem;">工具包<sup>1</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">教程<sup>8</sup></a><a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 1.05rem;">日志<sup>1</sup></a><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 1.05rem;">服务器<sup>6</sup></a><a href="/tags/%E6%9D%A1%E5%BD%A2%E7%A0%81/" style="font-size: 1.05rem;">条形码<sup>1</sup></a><a href="/tags/%E6%9E%84%E5%BB%BA/" style="font-size: 1.05rem;">构建<sup>7</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/" style="font-size: 1.05rem;">模板引擎<sup>3</sup></a><a href="/tags/%E9%82%AE%E4%BB%B6/" style="font-size: 1.05rem;">邮件<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">四月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/JavaWeb/" itemprop="url">JavaWeb</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Java/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Java</span></a><a class="article-meta__tags" href="/tags/JavaWeb/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>JavaWeb</span></a><a class="article-meta__tags" href="/tags/JSP/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>JSP</span></a></span></div></div><h1 class="post-title" itemprop="name headline">JavaWeb 之 Jsp 指南</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2020-02-07T15:04:47.000Z" title="发表于 2020-02-07 23:04:47">2020-02-07</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-04-18T13:22:44.232Z" title="更新于 2024-04-18 21:22:44">2024-04-18</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span id="" data-flag-title="JavaWeb 之 Jsp 指南"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="ArtalkPV"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为北京"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>北京</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://blog.reaicc.com/posts/javajsp/"><header><a class="post-meta-categories" href="/categories/JavaWeb/" itemprop="url">JavaWeb</a><a href="/tags/Java/" tabindex="-1" itemprop="url">Java</a><a href="/tags/JavaWeb/" tabindex="-1" itemprop="url">JavaWeb</a><a href="/tags/JSP/" tabindex="-1" itemprop="url">JSP</a><h1 id="CrawlerTitle" itemprop="name headline">JavaWeb 之 Jsp 指南</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">REAI</span><time itemprop="dateCreated datePublished" datetime="2020-02-07T15:04:47.000Z" title="发表于 2020-02-07 23:04:47">2020-02-07</time><time itemprop="dateCreated datePublished" datetime="2024-04-18T13:22:44.232Z" title="更新于 2024-04-18 21:22:44">2024-04-18</time></header><h1 id="JavaWeb-之-Jsp-指南"><a href="#JavaWeb-之-Jsp-指南" class="headerlink" title="JavaWeb 之 Jsp 指南"></a>JavaWeb 之 Jsp 指南</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="什么是-Java-Server-Pages"><a href="#什么是-Java-Server-Pages" class="headerlink" title="什么是 Java Server Pages"></a>什么是 Java Server Pages</h3><p><code>JSP</code>全称<code>Java Server Pages</code>，是一种动态网页开发技术。</p>
<p>它使用 JSP 标签在 HTML 网页中插入 Java 代码。标签通常以<code>&lt;%</code>开头以<code>%&gt;</code>结束。</p>
<p>JSP 是一种 Java servlet，主要用于实现 Java web 应用程序的用户界面部分。网页开发者们通过结合 HTML 代码、XHTML 代码、XML 元素以及嵌入 JSP 操作和命令来编写 JSP。</p>
<p>JSP 通过网页表单获取用户输入数据、访问数据库及其他数据源，然后动态地创建网页。</p>
<p>JSP 标签有多种功能，比如访问数据库、记录用户选择信息、访问 JavaBeans 组件等，还可以在不同的网页中传递控制信息和共享信息。</p>
<h3 id="为什么使用-JSP"><a href="#为什么使用-JSP" class="headerlink" title="为什么使用 JSP"></a>为什么使用 JSP</h3><p>JSP 也是一种 Servlet，因此 JSP 能够完成 Servlet 能完成的任何工作。</p>
<p>JSP 程序与 CGI 程序有着相似的功能，但和 CGI 程序相比，JSP 程序有如下优势：</p>
<ul>
<li>性能更加优越，因为 JSP 可以直接在 HTML 网页中动态嵌入元素而不需要单独引用 CGI 文件。</li>
<li>服务器调用的是已经编译好的 JSP 文件，而不像 CGI/Perl 那样必须先载入解释器和目标脚本。</li>
<li>JSP 基于 Java Servlets API，因此，JSP 拥有各种强大的企业级 Java API，包括 JDBC，JNDI，EJB，JAXP 等等。</li>
<li>JSP 页面可以与处理业务逻辑的 servlets 一起使用，这种模式被 Java servlet 模板引擎所支持。</li>
</ul>
<p>最后，JSP 是 Java EE 不可或缺的一部分，是一个完整的企业级应用平台。这意味着 JSP 可以用最简单的方式来实现最复杂的应用。</p>
<h3 id="JSP-的优势"><a href="#JSP-的优势" class="headerlink" title="JSP 的优势"></a>JSP 的优势</h3><p>以下列出了使用 JSP 带来的其他好处：</p>
<ul>
<li>与 ASP 相比：JSP 有两大优势。首先，动态部分用 Java 编写，而不是 VB 或其他 MS 专用语言，所以更加强大与易用。第二点就是 JSP 易于移植到非 MS 平台上。</li>
<li>与纯 Servlets 相比：JSP 可以很方便的编写或者修改 HTML 网页而不用去面对大量的 println 语句。</li>
<li>与 SSI 相比：SSI 无法使用表单数据、无法进行数据库链接。</li>
<li>与 JavaScript 相比：虽然 JavaScript 可以在客户端动态生成 HTML，但是很难与服务器交互，因此不能提供复杂的服务，比如访问数据库和图像处理等等。</li>
<li>与静态 HTML 相比：静态 HTML 不包含动态信息。</li>
</ul>
<h2 id="JSP-工作原理"><a href="#JSP-工作原理" class="headerlink" title="JSP 工作原理"></a>JSP 工作原理</h2><p><strong>JSP 是一种 Servlet</strong>，但工作方式和 Servlet 有所差别。</p>
<p>Servlet 是先将源代码编译为 class 文件后部署到服务器下的，<strong>先编译后部署</strong>。</p>
<p>Jsp 是先将源代码部署到服务器再编译，<strong>先部署后编译</strong>。</p>
<p>Jsp 会在客户端第一次请求 Jsp 文件时被编译为 HttpJspPage 类（Servlet 的一个子类）。该类会被服务器临时存放在服务器工作目录里。所以，第一次请求 Jsp 后，访问速度会变快就是这个道理。</p>
<h3 id="JSP-工作流程"><a href="#JSP-工作流程" class="headerlink" title="JSP 工作流程"></a>JSP 工作流程</h3><p>网络服务器需要一个 JSP 引擎，也就是一个容器来处理 JSP 页面。容器负责截获对 JSP 页面的请求。本教程使用内嵌 JSP 容器的 Apache 来支持 JSP 开发。</p>
<p>JSP 容器与 Web 服务器协同合作，为 JSP 的正常运行提供必要的运行环境和其他服务，并且能够正确识别专属于 JSP 网页的特殊元素。</p>
<p>下图显示了 JSP 容器和 JSP 文件在 Web 应用中所处的位置。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://www.runoob.com/wp-content/uploads/2014/01/jsp-arch.jpg" alt="img"></p>
<h4 id="工作步骤"><a href="#工作步骤" class="headerlink" title="工作步骤"></a>工作步骤</h4><p>以下步骤表明了 Web 服务器是如何使用 JSP 来创建网页的：</p>
<ul>
<li>就像其他普通的网页一样，您的浏览器发送一个 HTTP 请求给服务器。</li>
<li>Web 服务器识别出这是一个对 JSP 网页的请求，并且将该请求传递给 JSP 引擎。通过使用 URL 或者.jsp 文件来完成。</li>
<li>JSP 引擎从磁盘中载入 JSP 文件，然后将它们转化为 servlet。这种转化只是简单地将所有模板文本改用 println()语句，并且将所有的 JSP 元素转化成 Java 代码。</li>
<li>JSP 引擎将 servlet 编译成可执行类，并且将原始请求传递给 servlet 引擎。</li>
<li>Web 服务器的某组件将会调用 servlet 引擎，然后载入并执行 servlet 类。在执行过程中，servlet 产生 HTML 格式的输出并将其内嵌于 HTTP response 中上交给 Web 服务器。</li>
<li>Web 服务器以静态 HTML 网页的形式将 HTTP response 返回到您的浏览器中。</li>
<li>最终，Web 浏览器处理 HTTP response 中动态产生的 HTML 网页，就好像在处理静态网页一样。</li>
</ul>
<p>以上提及到的步骤可以用下图来表示：</p>
<p>一般情况下，JSP 引擎会检查 JSP 文件对应的 servlet 是否已经存在，并且检查 JSP 文件的修改日期是否早于 servlet。如果 JSP 文件的修改日期早于对应的 servlet，那么容器就可以确定 JSP 文件没有被修改过并且 servlet 有效。这使得整个流程与其他脚本语言（比如 PHP）相比要高效快捷一些。</p>
<h3 id="JSP-生命周期"><a href="#JSP-生命周期" class="headerlink" title="JSP 生命周期"></a>JSP 生命周期</h3><p>理解 JSP 底层功能的关键就是去理解它们所遵守的生命周期。</p>
<p>JSP 生命周期就是从创建到销毁的整个过程，类似于 servlet 生命周期，区别在于 JSP 生命周期还包括将 JSP 文件编译成 servlet。</p>
<p>以下是 JSP 生命周期中所走过的几个阶段：</p>
<ul>
<li><strong>编译阶段：</strong>servlet 容器编译 servlet 源文件，生成 servlet 类</li>
<li><strong>初始化阶段：</strong>加载与 JSP 对应的 servlet 类，创建其实例，并调用它的初始化方法</li>
<li><strong>执行阶段：</strong>调用与 JSP 对应的 servlet 实例的服务方法</li>
<li><strong>销毁阶段：</strong>调用与 JSP 对应的 servlet 实例的销毁方法，然后销毁 servlet 实例</li>
</ul>
<p>很明显，JSP 生命周期的四个主要阶段和 servlet 生命周期非常相似，下面给出图示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://www.runoob.com/wp-content/uploads/2014/01/jsp_life_cycle.jpg" alt="img"></p>
<h4 id="JSP-编译"><a href="#JSP-编译" class="headerlink" title="JSP 编译"></a>JSP 编译</h4><p>当浏览器请求 JSP 页面时，JSP 引擎会首先去检查是否需要编译这个文件。如果这个文件没有被编译过，或者在上次编译后被更改过，则编译这个 JSP 文件。</p>
<p>编译的过程包括三个步骤：</p>
<ul>
<li>解析 JSP 文件。</li>
<li>将 JSP 文件转为 servlet。</li>
<li>编译 servlet。</li>
</ul>
<h4 id="JSP-初始化"><a href="#JSP-初始化" class="headerlink" title="JSP 初始化"></a>JSP 初始化</h4><p>容器载入 JSP 文件后，它会在为请求提供任何服务前调用 jspInit()方法。如果您需要执行自定义的 JSP 初始化任务，复写 jspInit()方法就行了，就像下面这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jspInit</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">// 初始化代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一般来讲程序只初始化一次，servlet 也是如此。通常情况下您可以在 jspInit()方法中初始化数据库连接、打开文件和创建查询表。</p>
<h4 id="JSP-执行"><a href="#JSP-执行" class="headerlink" title="JSP 执行"></a>JSP 执行</h4><p>这一阶段描述了 JSP 生命周期中一切与请求相关的交互行为，直到被销毁。</p>
<p>当 JSP 网页完成初始化后，JSP 引擎将会调用 <code>_jspService()</code> 方法。</p>
<p><code>_jspService()</code> 方法需要一个 HttpServletRequest 对象和一个 HttpServletResponse 对象作为它的参数，就像下面这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">_jspService</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                 HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">   <span class="comment">// 服务端处理代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>_jspService()</code> 方法在每个 request 中被调用一次并且负责产生与之相对应的 response，并且它还负责产生所有 7 个 HTTP 方法的回应，比如 GET、POST、DELETE 等等。</p>
<h4 id="JSP-清理"><a href="#JSP-清理" class="headerlink" title="JSP 清理"></a>JSP 清理</h4><p>JSP 生命周期的销毁阶段描述了当一个 JSP 网页从容器中被移除时所发生的一切。</p>
<p>jspDestroy()方法在 JSP 中等价于 servlet 中的销毁方法。当您需要执行任何清理工作时复写 jspDestroy()方法，比如释放数据库连接或者关闭文件夹等等。</p>
<p>jspDestroy()方法的格式如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jspDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="comment">// 清理代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><p>脚本程序可以包含任意量的 Java 语句、变量、方法或表达式，只要它们在脚本语言中是有效的。</p>
<p>脚本程序的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% 代码片段 %&gt;</span><br></pre></td></tr></table></figure>
<p>或者，您也可以编写与其等价的 XML 语句，就像下面这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:scriptlet&gt;</span><br><span class="line">  代码片段</span><br><span class="line">&lt;/jsp:scriptlet&gt;</span><br></pre></td></tr></table></figure>
<p>任何文本、HTML 标签、JSP 元素必须写在脚本程序的外面。</p>
<p>下面给出一个示例，同时也是本教程的第一个 JSP 示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Hello World&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    Hello World!&lt;br /&gt;</span><br><span class="line">    &lt;% out.println(&quot;Your IP address is &quot; + request.getRemoteAddr()); %&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong>请确保 Apache Tomcat 已经安装在 C:\apache-tomcat-7.0.2 目录下并且运行环境已经正确设置。</p>
<p>将以上代码保存在 hello.jsp 中，然后将它放置在 C:\apache-tomcat-7.0.2\webapps\ROOT 目录下，打开浏览器并在地址栏中输入 <code>http://localhost:8080/hello.jsp</code> 。运行后得到以下结果：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://www.runoob.com/wp-content/uploads/2014/01/jsp_hello_world.jpg" alt="img"></p>
<h4 id="中文编码问题"><a href="#中文编码问题" class="headerlink" title="中文编码问题"></a>中文编码问题</h4><p>如果我们要在页面正常显示中文，我们需要在 JSP 文件头部添加以下代码：<code>&lt;&gt;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br></pre></td></tr></table></figure>
<p>接下来我们将以上程序修改为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    Hello World!&lt;br /&gt;</span><br><span class="line">    &lt;% out.println(&quot;你的 IP 地址 &quot; + request.getRemoteAddr()); %&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>这样中文就可以正常显示了。</p>
<h3 id="JSP-声明"><a href="#JSP-声明" class="headerlink" title="JSP 声明"></a>JSP 声明</h3><p>一个声明语句可以声明一个或多个变量、方法，供后面的 Java 代码使用。在 JSP 文件中，您必须先声明这些变量和方法然后才能使用它们。</p>
<p>JSP 声明的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! declaration; [ declaration; ]+ ... %&gt;</span><br></pre></td></tr></table></figure>
<p>或者，您也可以编写与其等价的 XML 语句，就像下面这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:declaration&gt;</span><br><span class="line">  代码片段</span><br><span class="line">&lt;/jsp:declaration&gt;</span><br></pre></td></tr></table></figure>
<p>程序示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! int i = 0; %&gt; &lt;%! int a, b, c; %&gt; &lt;%! Circle a = new Circle(2.0); %&gt;</span><br></pre></td></tr></table></figure>
<h3 id="JSP-表达式"><a href="#JSP-表达式" class="headerlink" title="JSP 表达式"></a>JSP 表达式</h3><p>一个 JSP 表达式中包含的脚本语言表达式，先被转化成 String，然后插入到表达式出现的地方。</p>
<p>由于表达式的值会被转化成 String，所以您可以在一个文本行中使用表达式而不用去管它是否是 HTML 标签。</p>
<p>表达式元素中可以包含任何符合 Java 语言规范的表达式，但是不能使用分号来结束表达式。</p>
<p>JSP 表达式的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= 表达式 %&gt;</span><br></pre></td></tr></table></figure>
<p>同样，您也可以编写与之等价的 XML 语句：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:expression&gt;</span><br><span class="line">  表达式</span><br><span class="line">&lt;/jsp:expression&gt;</span><br></pre></td></tr></table></figure>
<p>程序示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      今天的日期是: &lt;%= (new java.util.Date()).toLocaleString()%&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>运行后得到以下结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">今天的日期是: 2016-6-25 13:40:07</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="JSP-注释"><a href="#JSP-注释" class="headerlink" title="JSP 注释"></a>JSP 注释</h3><p>JSP 注释主要有两个作用：为代码作注释以及将某段代码注释掉。</p>
<p>JSP 注释的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;JSP注释示例&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;%-- 该部分注释在网页中不会被显示--%&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      今天的日期是: &lt;%= (new java.util.Date()).toLocaleString()%&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>运行后得到以下结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">今天的日期是: 2016-6-25 13:41:26</span><br></pre></td></tr></table></figure>
<p>不同情况下使用注释的语法规则：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>语法</strong></th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;%-- 注释 --%&gt;</code></td>
<td>JSP 注释，注释内容不会被发送至浏览器甚至不会被编译</td>
</tr>
<tr>
<td><code>&lt;!-- 注释 --&gt;</code></td>
<td>HTML 注释，通过浏览器查看网页源代码时可以看见注释内容</td>
</tr>
<tr>
<td><code>&lt;%</code></td>
<td>代表静态 &lt;%常量</td>
</tr>
<tr>
<td><code>%&gt;</code></td>
<td>代表静态 %&gt; 常量</td>
</tr>
<tr>
<td><code>&#39;</code></td>
<td>在属性中使用的单引号</td>
</tr>
<tr>
<td><code>&quot;</code></td>
<td>在属性中使用的双引号</td>
</tr>
</tbody>
</table>
</div>
<h3 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h3><p>JSP 提供对 Java 语言的全面支持。您可以在 JSP 程序中使用 Java API 甚至建立 Java 代码块，包括判断语句和循环语句等等。</p>
<h4 id="if…else-语句"><a href="#if…else-语句" class="headerlink" title="if…else 语句"></a>if…else 语句</h4><p><code>If…else</code>块，请看下面这个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt; &lt;%! int day = 1; %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;02.JSP语法 - if...else示例&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h3&gt;IF...ELSE 实例&lt;/h3&gt;</span><br><span class="line">    &lt;% if (day == 1 | day == 7) &#123; %&gt;</span><br><span class="line">    &lt;p&gt;今天是周末&lt;/p&gt;</span><br><span class="line">    &lt;% &#125; else &#123; %&gt;</span><br><span class="line">    &lt;p&gt;今天不是周末&lt;/p&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>运行后得到以下结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IF...ELSE 实例</span><br><span class="line">今天不是周末</span><br></pre></td></tr></table></figure>
<h4 id="switch…case-语句"><a href="#switch…case-语句" class="headerlink" title="switch…case 语句"></a>switch…case 语句</h4><p>现在来看看 switch…case 块，与 if…else 块有很大的不同，它使用 out.println()，并且整个都装在脚本程序的标签中，就像下面这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt; &lt;%! int day = 3; %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;02.JSP语法 - switch...case示例&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h3&gt;Sswitch...case示例&lt;/h3&gt;</span><br><span class="line">    &lt;% switch(day) &#123; case 0: out.println(&quot;星期天&quot;); break; case 1:</span><br><span class="line">    out.println(&quot;星期一&quot;); break; case 2: out.println(&quot;星期二&quot;); break; case 3:</span><br><span class="line">    out.println(&quot;星期三&quot;); break; case 4: out.println(&quot;星期四&quot;); break; case 5:</span><br><span class="line">    out.println(&quot;星期五&quot;); break; default: out.println(&quot;星期六&quot;); &#125; %&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>浏览器访问，运行后得出以下结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SWITCH...CASE 实例</span><br><span class="line"></span><br><span class="line">星期三</span><br></pre></td></tr></table></figure>
<h4 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h4><p>在 JSP 程序中可以使用 Java 的三个基本循环类型：for，while，和 do…while。</p>
<p>让我们来看看 for 循环的例子，以下输出的不同字体大小的”菜鸟教程”：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt; &lt;%! int fontSize; %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h3&gt;For 循环实例&lt;/h3&gt;</span><br><span class="line">    &lt;%for ( fontSize = 1; fontSize &lt;= 3; fontSize++)&#123; %&gt;</span><br><span class="line">    &lt;font color=&quot;green&quot; size=&quot;&lt;%= fontSize %&gt;&quot;&gt;</span><br><span class="line">      菜鸟教程 &lt;/font</span><br><span class="line">    &gt;&lt;br /&gt;</span><br><span class="line">    &lt;%&#125;%&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>运行后得到以下结果：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://www.runoob.com/wp-content/uploads/2014/01/7B4B85CF-FE4B-43CB-AAFF-F8594AD4342C.jpg" alt="img"></p>
<p>将上例改用 while 循环来写：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt; &lt;%! int fontSize; %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h3&gt;While 循环实例&lt;/h3&gt;</span><br><span class="line">    &lt;%while ( fontSize &lt;= 3)&#123; %&gt;</span><br><span class="line">    &lt;font color=&quot;green&quot; size=&quot;&lt;%= fontSize %&gt;&quot;&gt;</span><br><span class="line">      菜鸟教程 &lt;/font</span><br><span class="line">    &gt;&lt;br /&gt;</span><br><span class="line">    &lt;%fontSize++;%&gt; &lt;%&#125;%&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>浏览器访问，输出结果为（fontSize 初始化为 0，所以多输出了一行）：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://www.runoob.com/wp-content/uploads/2014/01/4F744CC9-E484-45BA-AF18-27AFCF4AD45C.jpg" alt="img"></p>
<p>JSP 运算符</p>
<p>JSP 支持所有 Java 逻辑和算术运算符。</p>
<p>下表罗列出了 JSP 常见运算符，优先级从高到底：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>类别</strong></th>
<th><strong>操作符</strong></th>
<th><strong>结合性</strong></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>后缀</td>
<td><code>() [] .</code> (点运算符)</td>
<td>左到右</td>
<td></td>
<td></td>
</tr>
<tr>
<td>一元</td>
<td><code>++ - - ! ~</code></td>
<td>右到左</td>
<td></td>
<td></td>
</tr>
<tr>
<td>可乘性</td>
<td><code>* / %</code></td>
<td>左到右</td>
<td></td>
<td></td>
</tr>
<tr>
<td>可加性</td>
<td><code>+ -</code></td>
<td>左到右</td>
<td></td>
<td></td>
</tr>
<tr>
<td>移位</td>
<td><code>&gt;&gt; &gt;&gt;&gt; &lt;&lt;</code></td>
<td>左到右</td>
<td></td>
<td></td>
</tr>
<tr>
<td>关系</td>
<td><code>&gt; &gt;= &lt; &lt;=</code></td>
<td>左到右</td>
<td></td>
<td></td>
</tr>
<tr>
<td>相等/不等</td>
<td><code>== !=</code></td>
<td>左到右</td>
<td></td>
<td></td>
</tr>
<tr>
<td>位与</td>
<td><code>&amp;</code></td>
<td>左到右</td>
<td></td>
<td></td>
</tr>
<tr>
<td>位异或</td>
<td><code>^</code></td>
<td>左到右</td>
<td></td>
<td></td>
</tr>
<tr>
<td>位或</td>
<td>`</td>
<td>`</td>
<td>左到右</td>
<td></td>
</tr>
<tr>
<td>逻辑与</td>
<td><code>&amp;&amp;</code></td>
<td>左到右</td>
<td></td>
<td></td>
</tr>
<tr>
<td>逻辑或</td>
<td>`</td>
<td></td>
<td>`</td>
<td>左到右</td>
</tr>
<tr>
<td>条件判断</td>
<td><code>?:</code></td>
<td>右到左</td>
<td></td>
<td></td>
</tr>
<tr>
<td>赋值</td>
<td>`= += -=*= /= %= &gt;&gt;= &lt;&lt;= &amp;= ^=</td>
<td>=`</td>
<td>右到左</td>
<td></td>
</tr>
<tr>
<td>逗号</td>
<td><code>,</code></td>
<td>左到右</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<h3 id="JSP-字面量"><a href="#JSP-字面量" class="headerlink" title="JSP 字面量"></a>JSP 字面量</h3><p>JSP 语言定义了以下几个字面量：</p>
<ul>
<li>布尔值(boolean)：true 和 false;</li>
<li>整型(int)：与 Java 中的一样;</li>
<li>浮点型(float)：与 Java 中的一样;</li>
<li>字符串(string)：以单引号或双引号开始和结束;</li>
<li>Null：null。</li>
</ul>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><p>JSP 指令用来设置整个 JSP 页面相关的属性，如网页的编码方式和脚本语言。</p>
<p>JSP 指令以开<code>&lt;%@</code>开始，以<code>%&gt;</code>结束。</p>
<p>JSP 指令语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ directive attribute=&quot;value&quot; %&gt;</span><br></pre></td></tr></table></figure>
<p>指令可以有很多个属性，它们以键值对的形式存在，并用逗号隔开。</p>
<p>JSP 中的三种指令标签：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>指令</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;%@ page ... %&gt;</code></td>
<td>定义网页依赖属性，比如脚本语言、error 页面、缓存需求等等</td>
</tr>
<tr>
<td><code>&lt;%@ include ... %&gt;</code></td>
<td>包含其他文件</td>
</tr>
<tr>
<td><code>&lt;%@ taglib ... %&gt;</code></td>
<td>引入标签库的定义，可以是自定义标签</td>
</tr>
</tbody>
</table>
</div>
<h3 id="Page-指令"><a href="#Page-指令" class="headerlink" title="Page 指令"></a>Page 指令</h3><p>Page 指令为容器提供当前页面的使用说明。一个 JSP 页面可以包含多个<code>page</code>指令。</p>
<p>Page 指令的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page attribute=&quot;value&quot; %&gt;</span><br></pre></td></tr></table></figure>
<p>等价的 XML 格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:directive.page attribute=&quot;value&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot; %&gt;</span><br></pre></td></tr></table></figure>
<h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><p>下表列出与 Page 指令相关的属性：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>buffer</td>
<td>指定 out 对象使用缓冲区的大小</td>
</tr>
<tr>
<td>autoFlush</td>
<td>控制 out 对象的 缓存区</td>
</tr>
<tr>
<td>contentType</td>
<td>指定当前 JSP 页面的 MIME 类型和字符编码</td>
</tr>
<tr>
<td>errorPage</td>
<td>指定当 JSP 页面发生异常时需要转向的错误处理页面</td>
</tr>
<tr>
<td>isErrorPage</td>
<td>指定当前页面是否可以作为另一个 JSP 页面的错误处理页面</td>
</tr>
<tr>
<td>extends</td>
<td>指定 servlet 从哪一个类继承</td>
</tr>
<tr>
<td>import</td>
<td>导入要使用的 Java 类</td>
</tr>
<tr>
<td>info</td>
<td>定义 JSP 页面的描述信息</td>
</tr>
<tr>
<td>isThreadSafe</td>
<td>指定对 JSP 页面的访问是否为线程安全</td>
</tr>
<tr>
<td>language</td>
<td>定义 JSP 页面所用的脚本语言，默认是 Java</td>
</tr>
<tr>
<td>session</td>
<td>指定 JSP 页面是否使用 session</td>
</tr>
<tr>
<td>isELIgnored</td>
<td>指定是否执行 EL 表达式</td>
</tr>
<tr>
<td>isScriptingEnabled</td>
<td>确定脚本元素能否被使用</td>
</tr>
</tbody>
</table>
</div>
<h3 id="Include-指令"><a href="#Include-指令" class="headerlink" title="Include 指令"></a>Include 指令</h3><p>JSP 可以通过<code>include</code>指令来包含其他文件。</p>
<p>被包含的文件可以是 JSP 文件、HTML 文件或文本文件。包含的文件就好像是该 JSP 文件的一部分，会被同时编译执行。</p>
<p>Include 指令的语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ include file=&quot;文件相对 url 地址&quot; %&gt;</span><br></pre></td></tr></table></figure>
<p><strong>include</strong> 指令中的文件名实际上是一个相对的 URL 地址。</p>
<p>如果您没有给文件关联一个路径，JSP 编译器默认在当前路径下寻找。</p>
<p>等价的 XML 语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:directive.include file=&quot;文件相对 url 地址&quot; /&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Taglib-指令"><a href="#Taglib-指令" class="headerlink" title="Taglib 指令"></a>Taglib 指令</h3><p>JSP 允许用户自定义标签，一个自定义标签库就是自定义标签的集合。</p>
<p><code>taglib</code>指令引入一个自定义标签集合的定义，包括库路径、自定义标签。</p>
<p><code>taglib</code>指令的语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib uri=&quot;uri&quot; prefix=&quot;prefixOfTag&quot; %&gt;</span><br></pre></td></tr></table></figure>
<p>uri 属性确定标签库的位置，prefix 属性指定标签库的前缀。</p>
<p>等价的 XML 语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:directive.taglib uri=&quot;uri&quot; prefix=&quot;prefixOfTag&quot; /&gt;</span><br></pre></td></tr></table></figure>
<h2 id="JSP-动作元素"><a href="#JSP-动作元素" class="headerlink" title="JSP 动作元素"></a>JSP 动作元素</h2><p>JSP 动作元素是一组 JSP 内置的标签，只需要书写很少的标记代码就能使用 JSP 提供的丰富功能。JSP 动作元素是对常用的 JSP 功能的抽象与封装，包括两种，自定义 JSP 动作元素与标准 JSP 动作元素。</p>
<p>与 JSP 指令元素不同的是，JSP 动作元素在请求处理阶段起作用。JSP 动作元素是用 XML 语法写成的。</p>
<p>利用 JSP 动作可以动态地插入文件、重用 JavaBean 组件、把用户重定向到另外的页面、为 Java 插件生成 HTML 代码。</p>
<p>动作元素只有一种语法，它符合 XML 标准：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:action_name attribute=&quot;value&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>动作元素基本上都是预定义的函数，JSP 规范定义了一系列的标准动作，它用 JSP 作为前缀，可用的标准动作元素如下：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>jsp:include</td>
<td>在页面被请求的时候引入一个文件。</td>
</tr>
<tr>
<td>jsp:useBean</td>
<td>寻找或者实例化一个 JavaBean。</td>
</tr>
<tr>
<td>jsp:setProperty</td>
<td>设置 JavaBean 的属性。</td>
</tr>
<tr>
<td>jsp:getProperty</td>
<td>输出某个 JavaBean 的属性。</td>
</tr>
<tr>
<td>jsp:forward</td>
<td>把请求转到一个新的页面。</td>
</tr>
<tr>
<td>jsp:plugin</td>
<td>根据浏览器类型为 Java 插件生成 OBJECT 或 EMBED 标记。</td>
</tr>
<tr>
<td>jsp:element</td>
<td>定义动态 XML 元素</td>
</tr>
<tr>
<td>jsp:attribute</td>
<td>设置动态定义的 XML 元素属性。</td>
</tr>
<tr>
<td>jsp:body</td>
<td>设置动态定义的 XML 元素内容。</td>
</tr>
<tr>
<td>jsp:text</td>
<td>在 JSP 页面和文档中使用写入文本的模板</td>
</tr>
</tbody>
</table>
</div>
<h3 id="常见的属性"><a href="#常见的属性" class="headerlink" title="常见的属性"></a>常见的属性</h3><p>所有的动作要素都有两个属性：id 属性和 scope 属性。</p>
<ul>
<li><strong>id 属性：</strong>id 属性是动作元素的唯一标识，可以在 JSP 页面中引用。动作元素创建的 id 值可以通过 PageContext 来调用。</li>
<li><strong>scope 属性：</strong>该属性用于识别动作元素的生命周期。 id 属性和 scope 属性有直接关系，scope 属性定义了相关联 id 对象的寿命。 scope 属性有四个可能的值： (a) page, (b)request, (c)session, 和 (d) application。</li>
</ul>
<h3 id="lt-jsp-include-gt"><a href="#lt-jsp-include-gt" class="headerlink" title="&lt;jsp:include&gt;"></a><code>&lt;jsp:include&gt;</code></h3><p><code>&lt;jsp:include&gt;</code> 用来包含静态和动态的文件。该动作把指定文件插入正在生成的页面。</p>
<p>如果被包含的文件为 JSP 程序，则会先执行 JSP 程序，再将执行结果包含进来。</p>
<p>语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include page=&quot;相对 URL 地址&quot; flush=&quot;true&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>前面已经介绍过 include 指令，它是在 JSP 文件被转换成 Servlet 的时候引入文件，而这里的 jsp:include 动作不同，插入文件的时间是在页面被请求的时候。</p>
<p>以下是 include 动作相关的属性列表。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>page</td>
<td>包含在页面中的相对 URL 地址。</td>
</tr>
<tr>
<td>flush</td>
<td>布尔属性，定义在包含资源前是否刷新缓存区。</td>
</tr>
</tbody>
</table>
</div>
<p>示例：</p>
<p>以下我们定义了两个文件 <strong>date.jsp</strong> 和 <strong>main.jsp</strong>，代码如下所示：</p>
<p>date.jsp 文件代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">  今天的日期是: &lt;%= (new java.util.Date())%&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<p>main.jsp 文件代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h2&gt;include 动作实例&lt;/h2&gt;</span><br><span class="line">    &lt;jsp:include page=&quot;date.jsp&quot; flush=&quot;true&quot; /&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>现在将以上两个文件放在服务器的根目录下，访问 main.jsp 文件。显示结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">include 动作实例</span><br><span class="line"></span><br><span class="line">今天的日期是: 2016-6-25 14:08:17</span><br></pre></td></tr></table></figure>
<h3 id="lt-jsp-useBean-gt"><a href="#lt-jsp-useBean-gt" class="headerlink" title="&lt;jsp:useBean&gt;"></a><code>&lt;jsp:useBean&gt;</code></h3><p><strong>jsp:useBean</strong> 动作用来加载一个将在 JSP 页面中使用的 JavaBean。</p>
<p>这个功能非常有用，因为它使得我们可以发挥 Java 组件复用的优势。</p>
<p>jsp:useBean 动作最简单的语法为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=&quot;name&quot; class=&quot;package.class&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>在类载入后，我们既可以通过 jsp:setProperty 和 jsp:getProperty 动作来修改和检索 bean 的属性。</p>
<p>以下是 useBean 动作相关的属性列表。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>class</td>
<td>指定 Bean 的完整包名。</td>
</tr>
<tr>
<td>type</td>
<td>指定将引用该对象变量的类型。</td>
</tr>
<tr>
<td>beanName</td>
<td>通过 java.beans.Beans 的 instantiate() 方法指定 Bean 的名字。</td>
</tr>
</tbody>
</table>
</div>
<p>在给出具体实例前，让我们先来看下 jsp:setProperty 和 jsp:getProperty 动作元素：</p>
<h3 id="lt-jsp-setProperty-gt"><a href="#lt-jsp-setProperty-gt" class="headerlink" title="&lt;jsp:setProperty&gt;"></a><code>&lt;jsp:setProperty&gt;</code></h3><p>jsp:setProperty 用来设置已经实例化的 Bean 对象的属性，有两种用法。首先，你可以在 jsp:useBean 元素的外面（后面）使用 jsp:setProperty，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=&quot;myName&quot; ... /&gt;</span><br><span class="line">...</span><br><span class="line">&lt;jsp:setProperty name=&quot;myName&quot; property=&quot;someProperty&quot; .../&gt;</span><br></pre></td></tr></table></figure>
<p>此时，不管 jsp:useBean 是找到了一个现有的 Bean，还是新创建了一个 Bean 实例，jsp:setProperty 都会执行。第二种用法是把 jsp:setProperty 放入 jsp:useBean 元素的内部，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=&quot;myName&quot; ... &gt;</span><br><span class="line">...</span><br><span class="line">   &lt;jsp:setProperty name=&quot;myName&quot; property=&quot;someProperty&quot; .../&gt;</span><br><span class="line">&lt;/jsp:useBean&gt;</span><br></pre></td></tr></table></figure>
<p>此时，jsp:setProperty 只有在新建 Bean 实例时才会执行，如果是使用现有实例则不执行 jsp:setProperty。</p>
<p>jsp:setProperty 动作有下面四个属性,如下表：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>name 属性是必需的。它表示要设置属性的是哪个 Bean。</td>
</tr>
<tr>
<td>property</td>
<td>property 属性是必需的。它表示要设置哪个属性。有一个特殊用法：如果 property 的值是”*“，表示所有名字和 Bean 属性名字匹配的请求参数都将被传递给相应的属性 set 方法。</td>
</tr>
<tr>
<td>value</td>
<td>value 属性是可选的。该属性用来指定 Bean 属性的值。字符串数据会在目标类中通过标准的 valueOf 方法自动转换成数字、boolean、Boolean、 byte、Byte、char、Character。例如，boolean 和 Boolean 类型的属性值（比如”true”）通过 Boolean.valueOf 转换，int 和 Integer 类型的属性值（比如”42”）通过 Integer.valueOf 转换。 　　 value 和 param 不能同时使用，但可以使用其中任意一个。</td>
</tr>
<tr>
<td>param</td>
<td>param 是可选的。它指定用哪个请求参数作为 Bean 属性的值。如果当前请求没有参数，则什么事情也不做，系统不会把 null 传递给 Bean 属性的 set 方法。因此，你可以让 Bean 自己提供默认属性值，只有当请求参数明确指定了新值时才修改默认属性值。</td>
</tr>
</tbody>
</table>
</div>
<h3 id="lt-jsp-getProperty-gt"><a href="#lt-jsp-getProperty-gt" class="headerlink" title="&lt;jsp:getProperty&gt;"></a><code>&lt;jsp:getProperty&gt;</code></h3><p>jsp:getProperty 动作提取指定 Bean 属性的值，转换成字符串，然后输出。语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=&quot;myName&quot; ... /&gt;</span><br><span class="line">...</span><br><span class="line">&lt;jsp:getProperty name=&quot;myName&quot; property=&quot;someProperty&quot; .../&gt;</span><br></pre></td></tr></table></figure>
<p>下表是与 getProperty 相关联的属性：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>要检索的 Bean 属性名称。Bean 必须已定义。</td>
</tr>
<tr>
<td>property</td>
<td>表示要提取 Bean 属性的值</td>
</tr>
</tbody>
</table>
</div>
<p>实例</p>
<p>以下实例我们使用了 Bean:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBean</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String message = <span class="string">&quot;菜鸟教程&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span>(message);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.message = message;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译以上实例文件 TestBean.java ：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ javac TestBean.java</span><br></pre></td></tr></table></figure>
<p>编译完成后会在当前目录下生成一个 <strong>TestBean.class</strong> 文件， 将该文件拷贝至当前 JSP 项目的 <strong>WebContent/WEB-INF/classes/com/runoob/main</strong> 下( com/runoob/main 包路径，没有需要手动创建)。</p>
<p>下面是一个 Eclipse 中目录结构图：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://www.runoob.com/wp-content/uploads/2014/01/6AC33FBA-0B76-4BFD-A690-E856E9E01900.jpg" alt="img"></p>
<p>下面是一个很简单的例子，它的功能是装载一个 Bean，然后设置/读取它的 message 属性。</p>
<p>现在让我们在 main.jsp 文件中调用该 Bean:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h2&gt;Jsp 使用 JavaBean 实例&lt;/h2&gt;</span><br><span class="line">    &lt;jsp:useBean id=&quot;test&quot; class=&quot;com.runoob.main.TestBean&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;jsp:setProperty name=&quot;test&quot; property=&quot;message&quot; value=&quot;菜鸟教程...&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;p&gt;输出信息....&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">    &lt;jsp:getProperty name=&quot;test&quot; property=&quot;message&quot; /&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>浏览器访问，执行以上文件，输出如下所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://www.runoob.com/wp-content/uploads/2014/01/D7AD87A8-3392-4D4E-8731-18806B0644CD.jpg" alt="img"></p>
<h3 id="lt-jsp-forward-gt"><a href="#lt-jsp-forward-gt" class="headerlink" title="&lt;jsp:forward&gt;"></a><code>&lt;jsp:forward&gt;</code></h3><p>jsp:forward 动作把请求转到另外的页面。jsp:forward 标记只有一个属性 page。语法格式如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:forward page=&quot;相对 URL 地址&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>以下是 forward 相关联的属性：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>page</td>
<td>page 属性包含的是一个相对 URL。page 的值既可以直接给出，也可以在请求的时候动态计算，可以是一个 JSP 页面或者一个 Java Servlet.</td>
</tr>
</tbody>
</table>
</div>
<p>实例</p>
<p>以下实例我们使用了两个文件，分别是： date.jsp 和 main.jsp。</p>
<p>date.jsp 文件代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">  今天的日期是: &lt;%= (new java.util.Date()).toLocaleString()%&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<p>main.jsp 文件代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h2&gt;forward 动作实例&lt;/h2&gt;</span><br><span class="line">    &lt;jsp:forward page=&quot;date.jsp&quot; /&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>现在将以上两个文件放在服务器的根目录下，访问 main.jsp 文件。显示结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">今天的日期是: 2016-6-25 14:37:25</span><br></pre></td></tr></table></figure>
<h3 id="lt-jsp-plugin-gt"><a href="#lt-jsp-plugin-gt" class="headerlink" title="&lt;jsp:plugin&gt;"></a><code>&lt;jsp:plugin&gt;</code></h3><p>jsp:plugin 动作用来根据浏览器的类型，插入通过 Java 插件 运行 Java Applet 所必需的 OBJECT 或 EMBED 元素。</p>
<p>如果需要的插件不存在，它会下载插件，然后执行 Java 组件。 Java 组件可以是一个 applet 或一个 JavaBean。</p>
<p>plugin 动作有多个对应 HTML 元素的属性用于格式化 Java 组件。param 元素可用于向 Applet 或 Bean 传递参数。</p>
<p>以下是使用 plugin 动作元素的典型实例:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:plugin type=&quot;applet&quot; codebase=&quot;dirname&quot; code=&quot;MyApplet.class&quot;</span><br><span class="line">                           width=&quot;60&quot; height=&quot;80&quot;&gt;</span><br><span class="line">   &lt;jsp:param name=&quot;fontcolor&quot; value=&quot;red&quot; /&gt;</span><br><span class="line">   &lt;jsp:param name=&quot;background&quot; value=&quot;black&quot; /&gt;</span><br><span class="line"></span><br><span class="line">   &lt;jsp:fallback&gt;</span><br><span class="line">      Unable to initialize Java Plugin</span><br><span class="line">   &lt;/jsp:fallback&gt;</span><br><span class="line"></span><br><span class="line">&lt;/jsp:plugin&gt;</span><br></pre></td></tr></table></figure>
<p>如果你有兴趣可以尝试使用 applet 来测试 <code>jsp:plugin</code> 动作元素，<code>&lt;fallback&gt;</code> 元素是一个新元素，在组件出现故障的错误是发送给用户错误信息。</p>
<h3 id="lt-jsp-element-gt-、-lt-jsp-attribute-gt-、-lt-jsp-body-gt"><a href="#lt-jsp-element-gt-、-lt-jsp-attribute-gt-、-lt-jsp-body-gt" class="headerlink" title="&lt;jsp:element&gt; 、 &lt;jsp:attribute&gt;、&lt;jsp:body&gt;"></a><code>&lt;jsp:element&gt;</code> 、 <code>&lt;jsp:attribute&gt;</code>、<code>&lt;jsp:body&gt;</code></h3><p><code>&lt;jsp:element&gt;</code> 、 <code>&lt;jsp:attribute&gt;</code>、<code>&lt;jsp:body&gt;</code> 动作元素动态定义 XML 元素。动态是非常重要的，这就意味着 XML 元素在编译时是动态生成的而非静态。</p>
<p>以下实例动态定义了 XML 元素：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;jsp:element name=&quot;xmlElement&quot;&gt;</span><br><span class="line">      &lt;jsp:attribute name=&quot;xmlElementAttr&quot;&gt;</span><br><span class="line">        属性值</span><br><span class="line">      &lt;/jsp:attribute&gt;</span><br><span class="line">      &lt;jsp:body&gt;</span><br><span class="line">        XML 元素的主体</span><br><span class="line">      &lt;/jsp:body&gt;</span><br><span class="line">    &lt;/jsp:element&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>浏览器访问以下页面，输出结果如下所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://www.runoob.com/wp-content/uploads/2014/01/7D8C47F0-0DDE-4F1D-8BE1-B2C9C955683E.jpg" alt="img"></p>
<h3 id="lt-jsp-text-gt"><a href="#lt-jsp-text-gt" class="headerlink" title="&lt;jsp:text&gt;"></a><code>&lt;jsp:text&gt;</code></h3><p><a href="jsp:text">jsp:text</a>动作元素允许在 JSP 页面和文档中使用写入文本的模板，语法格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;模板数据&lt;/jsp:text&gt;</span><br></pre></td></tr></table></figure>
<p>以上文本模板不能包含其他元素，只能只能包含文本和 EL 表达式（注：EL 表达式将在后续章节中介绍）。请注意，在 XML 文件中，您不能使用表达式如 ${whatever &gt; 0}，因为&gt;符号是非法的。 你可以使用 ${whatever gt 0}表达式或者嵌入在一个 CDATA 部分的值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;&lt;![CDATA[&lt;br&gt;]]&gt;&lt;/jsp:text&gt;</span><br></pre></td></tr></table></figure>
<p>如果你需要在 XHTML 中声明 DOCTYPE,必须使用到 <code>&lt;jsp:text&gt;</code> 动作元素，实例如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;&lt;![CDATA[&lt;!DOCTYPE html</span><br><span class="line">PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;</span><br><span class="line">&quot;DTD/xhtml1-strict.dtd&quot;&gt;]]&gt;</span><br><span class="line">&lt;/jsp:text&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;jsp:text action&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;books&gt;&lt;book&gt;&lt;jsp:text&gt;</span><br><span class="line">    Welcome to JSP Programming</span><br><span class="line">&lt;/jsp:text&gt;&lt;/book&gt;&lt;/books&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>你可以对以上实例尝试使用<a href="jsp:text">jsp:text</a>及不使用该动作元素执行结果的区别。</p>
<h2 id="JSP-隐式对象"><a href="#JSP-隐式对象" class="headerlink" title="JSP 隐式对象"></a>JSP 隐式对象</h2><p>JSP 隐式对象是 JSP 容器为每个页面提供的 Java 对象，开发者可以直接使用它们而不用显式声明。JSP 隐式对象也被称为预定义变量。</p>
<p>JSP 所支持的九大隐式对象：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>对象</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>request</td>
<td><strong>HttpServletRequest</strong>类的实例</td>
</tr>
<tr>
<td>response</td>
<td><strong>HttpServletResponse</strong>类的实例</td>
</tr>
<tr>
<td>out</td>
<td><strong>PrintWriter</strong>类的实例，用于把结果输出至网页上</td>
</tr>
<tr>
<td>session</td>
<td><strong>HttpSession</strong>类的实例</td>
</tr>
<tr>
<td>application</td>
<td><strong>ServletContext</strong>类的实例，与应用上下文有关</td>
</tr>
<tr>
<td>config</td>
<td><strong>ServletConfig</strong>类的实例</td>
</tr>
<tr>
<td>pageContext</td>
<td><strong>PageContext</strong>类的实例，提供对 JSP 页面所有对象以及命名空间的访问</td>
</tr>
<tr>
<td>page</td>
<td>类似于 Java 类中的 this 关键字</td>
</tr>
<tr>
<td>Exception</td>
<td><strong>Exception</strong>类的对象，代表发生错误的 JSP 页面中对应的异常对象</td>
</tr>
</tbody>
</table>
</div>
<h3 id="request-对象"><a href="#request-对象" class="headerlink" title="request 对象"></a>request 对象</h3><p><code>request</code>对象是<code>javax.servlet.http.HttpServletRequest</code> 类的实例。</p>
<p>每当客户端请求一个 JSP 页面时，JSP 引擎就会制造一个新的<code>request</code>对象来代表这个请求。</p>
<p><code>request</code>对象提供了一系列方法来获取 HTTP 头信息，cookies，HTTP 方法等等。</p>
<h3 id="response-对象"><a href="#response-对象" class="headerlink" title="response 对象"></a>response 对象</h3><p><code>response</code>对象是<code>javax.servlet.http.HttpServletResponse</code>类的实例。</p>
<p>当服务器创建<code>request</code>对象时会同时创建用于响应这个客户端的<code>response</code>对象。</p>
<p><code>response</code>对象也定义了处理 HTTP 头模块的接口。通过这个对象，开发者们可以添加新的 cookies，时间戳，HTTP 状态码等等。</p>
<h3 id="out-对象"><a href="#out-对象" class="headerlink" title="out 对象"></a>out 对象</h3><p><code>out</code>对象是<code>javax.servlet.jsp.JspWriter</code>类的实例，用来在<code>response</code>对象中写入内容。</p>
<p>最初的<code>JspWriter</code>类对象根据页面是否有缓存来进行不同的实例化操作。可以在<code>page</code>指令中使用<code>buffered=&#39;false&#39;</code>属性来轻松关闭缓存。</p>
<p><code>JspWriter</code>类包含了大部分<code>java.io.PrintWriter</code>类中的方法。不过，<code>JspWriter</code>新增了一些专为处理缓存而设计的方法。还有就是，<code>JspWriter</code>类会抛出<code>IOExceptions</code>异常，而<code>PrintWriter</code>不会。</p>
<p>下表列出了我们将会用来输出<code>boolean</code>，<code>char</code>，<code>int</code>，<code>double</code>，<code>String</code>，<code>object</code>等类型数据的重要方法：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>out.print(dataType dt)</strong></td>
<td>输出 Type 类型的值</td>
</tr>
<tr>
<td><strong>out.println(dataType dt)</strong></td>
<td>输出 Type 类型的值然后换行</td>
</tr>
<tr>
<td><strong>out.flush()</strong></td>
<td>刷新输出流</td>
</tr>
</tbody>
</table>
</div>
<h3 id="session-对象"><a href="#session-对象" class="headerlink" title="session 对象"></a>session 对象</h3><p><code>session</code>对象是<code>javax.servlet.http.HttpSession</code>类的实例。和 Java Servlets 中的<code>session</code>对象有一样的行为。</p>
<p><code>session</code>对象用来跟踪在各个客户端请求间的会话。</p>
<h3 id="application-对象"><a href="#application-对象" class="headerlink" title="application 对象"></a>application 对象</h3><p><code>application</code>对象直接包装了 servlet 的<code>ServletContext</code>类的对象，是<code>javax.servlet.ServletContext</code>类的实例。</p>
<p>这个对象在 JSP 页面的整个生命周期中都代表着这个 JSP 页面。这个对象在 JSP 页面初始化时被创建，随着<code>jspDestroy()</code>方法的调用而被移除。</p>
<p>通过向<code>application</code>中添加属性，则所有组成您 web 应用的 JSP 文件都能访问到这些属性。</p>
<h3 id="config-对象"><a href="#config-对象" class="headerlink" title="config 对象"></a>config 对象</h3><p><code>config</code>对象是<code>javax.servlet.ServletConfig</code>类的实例，直接包装了 servlet 的<code>ServletConfig</code>类的对象。</p>
<p>这个对象允许开发者访问 Servlet 或者 JSP 引擎的初始化参数，比如文件路径等。</p>
<p>以下是 config 对象的使用方法，不是很重要，所以不常用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.getServletName();</span><br></pre></td></tr></table></figure>
<p>它返回包含在<code>&lt;servlet-name&gt;</code>元素中的 servlet 名字，注意，<code>&lt;servlet-name&gt;</code>元素在<code>WEB-INF\web.xml</code>文件中定义。</p>
<h3 id="pageContext-对象"><a href="#pageContext-对象" class="headerlink" title="pageContext 对象"></a>pageContext 对象</h3><p><code>pageContext</code>对象是<code>javax.servlet.jsp.PageContext</code>类的实例，用来代表整个 JSP 页面。</p>
<p>这个对象主要用来访问页面信息，同时过滤掉大部分实现细节。</p>
<p>这个对象存储了<code>request</code>对象和<code>response</code>对象的引用。<code>application</code>对象，<code>config</code>对象，<code>session</code>对象，<code>out</code>对象可以通过访问这个对象的属性来导出。</p>
<p><code>pageContext</code>对象也包含了传给 JSP 页面的指令信息，包括缓存信息，ErrorPage URL,页面 scope 等。</p>
<p><code>PageContext</code>类定义了一些字段，包括 PAGE_SCOPE，REQUEST_SCOPE，SESSION_SCOPE， APPLICATION_SCOPE。它也提供了 40 余种方法，有一半继承自<code>javax.servlet.jsp.JspContext</code> 类。</p>
<p>其中一个重要的方法就是<code>removeArribute()</code>，它可接受一个或两个参数。比如，pageContext.removeArribute(“attrName”)移除四个 scope 中相关属性，但是下面这种方法只移除特定 scope 中的相关属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pageContext.removeAttribute(&quot;attrName&quot;, PAGE_SCOPE);</span><br></pre></td></tr></table></figure>
<h3 id="page-对象"><a href="#page-对象" class="headerlink" title="page 对象"></a>page 对象</h3><p>这个对象就是页面实例的引用。它可以被看做是整个 JSP 页面的代表。</p>
<p><code>page</code>对象就是<code>this</code>对象的同义词。</p>
<h3 id="exception-对象"><a href="#exception-对象" class="headerlink" title="exception 对象"></a>exception 对象</h3><p><code>exception</code>对象包装了从先前页面中抛出的异常信息。它通常被用来产生对出错条件的适当响应。</p>
<h2 id="EL-表达式"><a href="#EL-表达式" class="headerlink" title="EL 表达式"></a>EL 表达式</h2><p>EL 表达式是用<code>$&#123;&#125;</code>括起来的脚本，用来更方便地读取对象。EL 表达式写在 JSP 的 HTML 代码中，而不能写在<code>&lt;%</code>与<code>%&gt;</code>引起的 JSP 脚本中。</p>
<p>JSP 表达式语言（EL）使得访问存储在 JavaBean 中的数据变得非常简单。JSP EL 既可以用来创建算术表达式也可以用来创建逻辑表达式。在 JSP EL 表达式内可以使用整型数，浮点数，字符串，常量 true、false，还有 null。</p>
<h3 id="一个简单的语法"><a href="#一个简单的语法" class="headerlink" title="一个简单的语法"></a>一个简单的语法</h3><p>典型的，当您需要在 JSP 标签中指定一个属性值时，只需要简单地使用字符串即可：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:setProperty name=&quot;box&quot; property=&quot;perimeter&quot; value=&quot;100&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>JSP EL 允许您指定一个表达式来表示属性值。一个简单的表达式语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;expr&#125;</span><br></pre></td></tr></table></figure>
<p>其中，expr 指的是表达式。在 JSP EL 中通用的操作符是”.”和”[]”。这两个操作符允许您通过内嵌的 JSP 对象访问各种各样的 JavaBean 属性。</p>
<p>举例来说，上面的 <code>&lt;jsp:setProperty&gt;</code> 标签可以使用表达式语言改写成如下形式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:setProperty</span><br><span class="line">  name=&quot;box&quot;</span><br><span class="line">  property=&quot;perimeter&quot;</span><br><span class="line">  value=&quot;$&#123;2*box.width+2*box.height&#125;&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>
<p>当 JSP 编译器在属性中见到”${}”格式后，它会产生代码来计算这个表达式，并且产生一个替代品来代替表达式的值。</p>
<p>您也可以在标签的模板文本中使用表达式语言。比如 <code>&lt;jsp:text&gt;</code> 标签简单地将其主体中的文本插入到 JSP 输出中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;</span><br><span class="line">  &lt;h1&gt;Hello JSP!&lt;/h1&gt;</span><br><span class="line">&lt;/jsp:text&gt;</span><br></pre></td></tr></table></figure>
<p>现在，在<a href="jsp:text">jsp:text</a>标签主体中使用表达式，就像这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;</span><br><span class="line">  Box Perimeter is: $&#123;2*box.width + 2*box.height&#125;</span><br><span class="line">&lt;/jsp:text&gt;</span><br></pre></td></tr></table></figure>
<p>在 EL 表达式中可以使用圆括号来组织子表达式。比如 <code>$&#123;(1 + 2) _ 3&#125;</code> 等于 9，但是 <code>$&#123;1 + (2 _ 3)&#125;</code> 等于 7。</p>
<p>想要停用对 EL 表达式的评估的话，需要使用 page 指令将 isELIgnored 属性值设为 true：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page isELIgnored =&quot;true|false&quot; %&gt;</span><br></pre></td></tr></table></figure>
<p>这样，EL 表达式就会被忽略。若设为 false，则容器将会计算 EL 表达式。</p>
<h3 id="EL-中的基础操作符"><a href="#EL-中的基础操作符" class="headerlink" title="EL 中的基础操作符"></a>EL 中的基础操作符</h3><p>EL 表达式支持大部分 Java 所提供的算术和逻辑操作符：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>操作符</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>访问一个 Bean 属性或者一个映射条目</td>
</tr>
<tr>
<td>[]</td>
<td>访问一个数组或者链表的元素</td>
</tr>
<tr>
<td>( )</td>
<td>组织一个子表达式以改变优先级</td>
</tr>
<tr>
<td>+</td>
<td>加</td>
</tr>
<tr>
<td>-</td>
<td>减或负</td>
</tr>
<tr>
<td>*</td>
<td>乘</td>
</tr>
<tr>
<td>/ or div</td>
<td>除</td>
</tr>
<tr>
<td>% or mod</td>
<td>取模</td>
</tr>
<tr>
<td>== or eq</td>
<td>测试是否相等</td>
</tr>
<tr>
<td>!= or ne</td>
<td>测试是否不等</td>
</tr>
<tr>
<td>&lt; or lt</td>
<td>测试是否小于</td>
</tr>
<tr>
<td>&gt; or gt</td>
<td>测试是否大于</td>
</tr>
<tr>
<td>&lt;= or le</td>
<td>测试是否小于等于</td>
</tr>
<tr>
<td>&gt;= or ge</td>
<td>测试是否大于等于</td>
</tr>
<tr>
<td>&amp;&amp; or and</td>
<td>测试逻辑与</td>
</tr>
<tr>
<td>\</td>
<td>\</td>
<td>or or</td>
<td>测试逻辑或</td>
</tr>
<tr>
<td>! or not</td>
<td>测试取反</td>
</tr>
<tr>
<td>empty</td>
<td>测试是否空值</td>
</tr>
</tbody>
</table>
</div>
<h3 id="JSP-EL-中的函数"><a href="#JSP-EL-中的函数" class="headerlink" title="JSP EL 中的函数"></a>JSP EL 中的函数</h3><p>JSP EL 允许您在表达式中使用函数。这些函数必须被定义在自定义标签库中。函数的使用语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;ns:func(param1, param2, ...)&#125;</span><br></pre></td></tr></table></figure>
<p>ns 指的是命名空间（namespace），func 指的是函数的名称，param1 指的是第一个参数，param2 指的是第二个参数，以此类推。比如，有函数 fn:length，在 JSTL 库中定义，可以像下面这样来获取一个字符串的长度：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;fn:length(&quot;Get my length&quot;)&#125;</span><br></pre></td></tr></table></figure>
<p>要使用任何标签库中的函数，您需要将这些库安装在服务器中，然后使用 <code>&lt;taglib&gt;</code> 标签在 JSP 文件中包含这些库。</p>
<h3 id="JSP-EL-隐含对象"><a href="#JSP-EL-隐含对象" class="headerlink" title="JSP EL 隐含对象"></a>JSP EL 隐含对象</h3><p>JSP EL 支持下表列出的隐含对象：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>隐含对象</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>pageScope</td>
<td>page 作用域</td>
</tr>
<tr>
<td>requestScope</td>
<td>request 作用域</td>
</tr>
<tr>
<td>sessionScope</td>
<td>session 作用域</td>
</tr>
<tr>
<td>applicationScope</td>
<td>application 作用域</td>
</tr>
<tr>
<td>param</td>
<td>Request 对象的参数，字符串</td>
</tr>
<tr>
<td>paramValues</td>
<td>Request 对象的参数，字符串集合</td>
</tr>
<tr>
<td>header</td>
<td>HTTP 信息头，字符串</td>
</tr>
<tr>
<td>headerValues</td>
<td>HTTP 信息头，字符串集合</td>
</tr>
<tr>
<td>initParam</td>
<td>上下文初始化参数</td>
</tr>
<tr>
<td>cookie</td>
<td>Cookie 值</td>
</tr>
<tr>
<td>pageContext</td>
<td>当前页面的 pageContext</td>
</tr>
</tbody>
</table>
</div>
<p>您可以在表达式中使用这些对象，就像使用变量一样。接下来会给出几个例子来更好的理解这个概念。</p>
<h3 id="pageContext-对象-1"><a href="#pageContext-对象-1" class="headerlink" title="pageContext 对象"></a>pageContext 对象</h3><p>pageContext 对象是 JSP 中 pageContext 对象的引用。通过 pageContext 对象，您可以访问 request 对象。比如，访问 request 对象传入的查询字符串，就像这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;pageContext.request.queryString&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Scope-对象"><a href="#Scope-对象" class="headerlink" title="Scope 对象"></a>Scope 对象</h3><p>pageScope，requestScope，sessionScope，applicationScope 变量用来访问存储在各个作用域层次的变量。</p>
<p>举例来说，如果您需要显式访问在 applicationScope 层的 box 变量，可以这样来访问：applicationScope.box。</p>
<h3 id="param-和-paramValues-对象"><a href="#param-和-paramValues-对象" class="headerlink" title="param 和 paramValues 对象"></a>param 和 paramValues 对象</h3><p>param 和 paramValues 对象用来访问参数值，通过使用 request.getParameter 方法和 request.getParameterValues 方法。</p>
<p>举例来说，访问一个名为 order 的参数，可以这样使用表达式：<code>$&#123;param.order&#125;</code>，或者<code>$&#123;param[&quot;order&quot;]&#125;</code>。</p>
<p>接下来的例子表明了如何访问 request 中的 username 参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page import=&quot;java.io.*,java.util.*&quot; %&gt; &lt;% String title = &quot;Accessing Request</span><br><span class="line">Param&quot;; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;% out.print(title); %&gt;&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">      &lt;h1&gt;&lt;% out.print(title); %&gt;&lt;/h1&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">    &lt;div align=&quot;center&quot;&gt;</span><br><span class="line">      &lt;p&gt;$&#123;param[&quot;username&quot;]&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>param 对象返回单一的字符串，而 paramValues 对象则返回一个字符串数组。</p>
<h3 id="header-和-headerValues-对象"><a href="#header-和-headerValues-对象" class="headerlink" title="header 和 headerValues 对象"></a>header 和 headerValues 对象</h3><p>header 和 headerValues 对象用来访问信息头，通过使用 request.getHeader 方法和 request.getHeaders 方法。</p>
<p>举例来说，要访问一个名为 user-agent 的信息头，可以这样使用表达式：<code>$&#123;header.user-agent&#125;</code>，或者 <code>$&#123;header[&quot;user-agent&quot;]&#125;</code>。</p>
<p>接下来的例子表明了如何访问 user-agent 信息头：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page import=&quot;java.io.*,java.util.*&quot; %&gt; &lt;% String title = &quot;User Agent</span><br><span class="line">Example&quot;; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;% out.print(title); %&gt;&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">      &lt;h1&gt;&lt;% out.print(title); %&gt;&lt;/h1&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">    &lt;div align=&quot;center&quot;&gt;</span><br><span class="line">      &lt;p&gt;$&#123;header[&quot;user-agent&quot;]&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://www.runoob.com/wp-content/uploads/2014/01/jsp-expression-language.jpg" alt="img"></p>
<p>header 对象返回单一值，而 headerValues 则返回一个字符串数组。</p>
<h2 id="JSTL"><a href="#JSTL" class="headerlink" title="JSTL"></a>JSTL</h2><p>JSP 标准标签库（JSTL）是一个 JSP 标签集合，它封装了 JSP 应用的通用核心功能。</p>
<p>JSTL 支持通用的、结构化的任务，比如迭代，条件判断，XML 文档操作，国际化标签，SQL 标签。 除了这些，它还提供了一个框架来使用集成 JSTL 的自定义标签。</p>
<p>根据 JSTL 标签所提供的功能，可以将其分为 5 个类别。</p>
<ul>
<li><strong>核心标签</strong></li>
<li><strong>格式化标签</strong></li>
<li><strong>SQL 标签</strong></li>
<li><strong>XML 标签</strong></li>
<li><strong>JSTL 函数</strong></li>
</ul>
<h3 id="JSTL-库安装"><a href="#JSTL-库安装" class="headerlink" title="JSTL 库安装"></a>JSTL 库安装</h3><p>Apache Tomcat 安装 JSTL 库步骤如下：</p>
<p>从 Apache 的标准标签库中下载的二进包(jakarta-taglibs-standard-current.zip)。</p>
<ul>
<li>官方下载地址：<a target="_blank" rel="noopener" href="http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/">http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/</a></li>
<li>本站下载地址：<a target="_blank" rel="noopener" href="http://static.runoob.com/download/jakarta-taglibs-standard-1.1.2.tar.gz">jakarta-taglibs-standard-1.1.2.zip</a></li>
</ul>
<p>下载 <strong>jakarta-taglibs-standard-1.1.2.zip</strong> 包并解压，将 <strong>jakarta-taglibs-standard-1.1.2/lib/</strong> 下的两个 jar 文件：<strong>standard.jar</strong> 和 <strong>jstl.jar</strong> 文件拷贝到 <strong>/WEB-INF/lib/</strong> 下。</p>
<p>将 tld 下的需要引入的 tld 文件复制到 WEB-INF 目录下。</p>
<p>接下来我们在 web.xml 文件中添加以下配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app</span><br><span class="line">  version=&quot;2.4&quot;</span><br><span class="line">  xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot;</span><br><span class="line">  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">  xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee</span><br><span class="line">        http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;jsp-config&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/fmt&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/fmt.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/fmt-rt&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/fmt-rt.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/core&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/c.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/core-rt&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/c-rt.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/sql&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/sql.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/sql-rt&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/sql-rt.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/x&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/x.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">    &lt;taglib&gt;</span><br><span class="line">      &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/x-rt&lt;/taglib-uri&gt;</span><br><span class="line">      &lt;taglib-location&gt;/WEB-INF/x-rt.tld&lt;/taglib-location&gt;</span><br><span class="line">    &lt;/taglib&gt;</span><br><span class="line">  &lt;/jsp-config&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>
<p>使用任何库，你必须在每个 JSP 文件中的头部包含 <strong><taglib></strong> 标签。</p>
<h3 id="核心标签"><a href="#核心标签" class="headerlink" title="核心标签"></a>核心标签</h3><p>核心标签是最常用的 JSTL 标签。引用核心标签库的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">标签</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-out-tag.html"><code>&lt;c:out&gt;</code></a></td>
<td style="text-align:left">用于在 JSP 中显示数据，就像&lt;%= … &gt;</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-set-tag.html"><code>&lt;c:set&gt;</code></a></td>
<td style="text-align:left">用于保存数据</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-remove-tag.html"><code>&lt;c:remove&gt;</code></a></td>
<td style="text-align:left">用于删除数据</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-catch-tag.html"><code>&lt;c:catch&gt;</code></a></td>
<td style="text-align:left">用来处理产生错误的异常状况，并且将错误信息储存起来</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-if-tag.html"><code>&lt;c:if&gt;</code></a></td>
<td style="text-align:left">与我们在一般程序中用的 if 一样</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-choose-tag.html"><code>&lt;c:choose&gt;</code></a></td>
<td style="text-align:left">本身只当做<c:when>和<c:otherwise>的父标签</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-choose-tag.html"><code>&lt;c:when&gt;</code></a></td>
<td style="text-align:left"><c:choose>的子标签，用来判断条件是否成立</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-choose-tag.html"><code>&lt;c:otherwise&gt;</code></a></td>
<td style="text-align:left"><c:choose>的子标签，接在<c:when>标签后，当<c:when>标签判断为 false 时被执行</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-import-tag.html"><code>&lt;c:import&gt;</code></a></td>
<td style="text-align:left">检索一个绝对或相对 URL，然后将其内容暴露给页面</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-foreach-tag.html"><code>&lt;c:forEach&gt;</code></a></td>
<td style="text-align:left">基础迭代标签，接受多种集合类型</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-foreach-tag.html"><code>&lt;c:forTokens&gt;</code></a></td>
<td style="text-align:left">根据指定的分隔符来分隔内容并迭代输出</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-param-tag.html"><code>&lt;c:param&gt;</code></a></td>
<td style="text-align:left">用来给包含或重定向的页面传递参数</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-redirect-tag.html"><code>&lt;c:redirect&gt;</code></a></td>
<td style="text-align:left">重定向至一个新的 URL.</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-core-url-tag.html"><code>&lt;c:url&gt;</code></a></td>
<td style="text-align:left">使用可选的查询参数来创造一个 URL</td>
</tr>
</tbody>
</table>
</div>
<h3 id="格式化标签"><a href="#格式化标签" class="headerlink" title="格式化标签"></a>格式化标签</h3><p>JSTL 格式化标签用来格式化并输出文本、日期、时间、数字。引用格式化标签库的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;fmt&quot; uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; %&gt;</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">标签</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-formatnumber-tag.html"><code>&lt;fmt:formatNumber&gt;</code></a></td>
<td style="text-align:left">使用指定的格式或精度格式化数字</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-parsenumber-tag.html"><code>&lt;fmt:parseNumber&gt;</code></a></td>
<td style="text-align:left">解析一个代表着数字，货币或百分比的字符串</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-formatdate-tag.html"><code>&lt;fmt:formatDate&gt;</code></a></td>
<td style="text-align:left">使用指定的风格或模式格式化日期和时间</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-parsedate-tag.html"><code>&lt;fmt:parseDate&gt;</code></a></td>
<td style="text-align:left">解析一个代表着日期或时间的字符串</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-bundle-tag.html"><code>&lt;fmt:bundle&gt;</code></a></td>
<td style="text-align:left">绑定资源</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-setlocale-tag.html"><code>&lt;fmt:setLocale&gt;</code></a></td>
<td style="text-align:left">指定地区</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-setbundle-tag.html"><code>&lt;fmt:setBundle&gt;</code></a></td>
<td style="text-align:left">绑定资源</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-timezone-tag.html"><code>&lt;fmt:timeZone&gt;</code></a></td>
<td style="text-align:left">指定时区</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-settimezone-tag.html"><code>&lt;fmt:setTimeZone&gt;</code></a></td>
<td style="text-align:left">指定时区</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-message-tag.html"><code>&lt;fmt:message&gt;</code></a></td>
<td style="text-align:left">显示资源配置文件信息</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-format-requestencoding-tag.html"><code>&lt;fmt:requestEncoding&gt;</code></a></td>
<td style="text-align:left">设置 request 的字符编码</td>
</tr>
</tbody>
</table>
</div>
<h3 id="SQL-标签"><a href="#SQL-标签" class="headerlink" title="SQL 标签"></a>SQL 标签</h3><p>JSTL SQL 标签库提供了与关系型数据库（Oracle，MySQL，SQL Server 等等）进行交互的标签。引用 SQL 标签库的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;sql&quot; uri=&quot;http://java.sun.com/jsp/jstl/sql&quot; %&gt;</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">标签</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-setdatasource-tag.html"><code>&lt;sql:setDataSource&gt;</code></a></td>
<td style="text-align:left">指定数据源</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-query-tag.html"><code>&lt;sql:query&gt;</code></a></td>
<td style="text-align:left">运行 SQL 查询语句</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-update-tag.html"><code>&lt;sql:update&gt;</code></a></td>
<td style="text-align:left">运行 SQL 更新语句</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-param-tag.html"><code>&lt;sql:param&gt;</code></a></td>
<td style="text-align:left">将 SQL 语句中的参数设为指定值</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-dateparam-tag.html"><code>&lt;sql:dateParam&gt;</code></a></td>
<td style="text-align:left">将 SQL 语句中的日期参数设为指定的 java.util.Date 对象值</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-sql-transaction-tag.html"><code>&lt;sql:transaction&gt;</code></a></td>
<td style="text-align:left">在共享数据库连接中提供嵌套的数据库行为元素，将所有语句以一个事务的形式来运行</td>
</tr>
</tbody>
</table>
</div>
<h3 id="XML-标签"><a href="#XML-标签" class="headerlink" title="XML 标签"></a>XML 标签</h3><p>JSTL XML 标签库提供了创建和操作 XML 文档的标签。引用 XML 标签库的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;x&quot; uri=&quot;http://java.sun.com/jsp/jstl/xml&quot; %&gt;</span><br></pre></td></tr></table></figure>
<p>在使用 xml 标签前，你必须将 XML 和 XPath 的相关包拷贝至你的 <code>&lt;Tomcat 安装目录&gt;\lib</code> 下:</p>
<ul>
<li><p>XercesImpl.jar</p>
<p>下载地址： <a target="_blank" rel="noopener" href="http://www.apache.org/dist/xerces/j/">http://www.apache.org/dist/xerces/j/</a></p>
</li>
<li><p>xalan.jar</p>
<p>下载地址： <a target="_blank" rel="noopener" href="http://xml.apache.org/xalan-j/index.html">http://xml.apache.org/xalan-j/index.html</a></p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">标签</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-out-tag.html"><code>&lt;x:out&gt;</code></a></td>
<td style="text-align:left">与&lt;%= … &gt;,类似，不过只用于 XPath 表达式</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-parse-tag.html"><code>&lt;x:parse&gt;</code></a></td>
<td style="text-align:left">解析 XML 数据</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-set-tag.html"><code>&lt;x:set&gt;</code></a></td>
<td style="text-align:left">设置 XPath 表达式</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-if-tag.html"><code>&lt;x:if&gt;</code></a></td>
<td style="text-align:left">判断 XPath 表达式，若为真，则执行本体中的内容，否则跳过本体</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-foreach-tag.html"><code>&lt;x:forEach&gt;</code></a></td>
<td style="text-align:left">迭代 XML 文档中的节点</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-choose-tag.html"><code>&lt;x:choose&gt;</code></a></td>
<td style="text-align:left"><x:when>和<x:otherwise>的父标签</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-choose-tag.html"><code>&lt;x:when&gt;</code></a></td>
<td style="text-align:left"><x:choose>的子标签，用来进行条件判断</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-choose-tag.html"><code>&lt;x:otherwise&gt;</code></a></td>
<td style="text-align:left"><x:choose>的子标签，当<x:when>判断为 false 时被执行</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-transform-tag.html"><code>&lt;x:transform&gt;</code></a></td>
<td style="text-align:left">将 XSL 转换应用在 XML 文档中</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-xml-param-tag.html"><code>&lt;x:param&gt;</code></a></td>
<td style="text-align:left">与<x:transform>共同使用，用于设置 XSL 样式表</td>
</tr>
</tbody>
</table>
</div>
<h3 id="JSTL-函数"><a href="#JSTL-函数" class="headerlink" title="JSTL 函数"></a>JSTL 函数</h3><p>JSTL 包含一系列标准函数，大部分是通用的字符串处理函数。引用 JSTL 函数库的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;fn&quot; uri=&quot;http://java.sun.com/jsp/jstl/functions&quot; %&gt;</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-contains.html">fn:contains()</a></td>
<td style="text-align:left">测试输入的字符串是否包含指定的子串</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-containsignoreCase.html">fn:containsIgnoreCase()</a></td>
<td style="text-align:left">测试输入的字符串是否包含指定的子串，大小写不敏感</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-endswith.html">fn:endsWith()</a></td>
<td style="text-align:left">测试输入的字符串是否以指定的后缀结尾</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-escapexml.html">fn:escapeXml()</a></td>
<td style="text-align:left">跳过可以作为 XML 标记的字符</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-indexof.html">fn:indexOf()</a></td>
<td style="text-align:left">返回指定字符串在输入字符串中出现的位置</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-join.html">fn:join()</a></td>
<td style="text-align:left">将数组中的元素合成一个字符串然后输出</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-length.html">fn:length()</a></td>
<td style="text-align:left">返回字符串长度</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-replace.html">fn:replace()</a></td>
<td style="text-align:left">将输入字符串中指定的位置替换为指定的字符串然后返回</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-split.html">fn:split()</a></td>
<td style="text-align:left">将字符串用指定的分隔符分隔然后组成一个子字符串数组并返回</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-startswith.html">fn:startsWith()</a></td>
<td style="text-align:left">测试输入字符串是否以指定的前缀开始</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-substring.html">fn:substring()</a></td>
<td style="text-align:left">返回字符串的子集</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-substringafter.html">fn:substringAfter()</a></td>
<td style="text-align:left">返回字符串在指定子串之后的子集</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-substringbefore.html">fn:substringBefore()</a></td>
<td style="text-align:left">返回字符串在指定子串之前的子集</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-tolowercase.html">fn:toLowerCase()</a></td>
<td style="text-align:left">将字符串中的字符转为小写</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-touppercase.html">fn:toUpperCase()</a></td>
<td style="text-align:left">将字符串中的字符转为大写</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="http://www.runoob.com/jsp/jstl-function-trim.html">fn:trim()</a></td>
<td style="text-align:left">移除首尾的空白符</td>
</tr>
</tbody>
</table>
</div>
<h2 id="Taglib"><a href="#Taglib" class="headerlink" title="Taglib"></a>Taglib</h2><h3 id="JSP-自定义标签"><a href="#JSP-自定义标签" class="headerlink" title="JSP 自定义标签"></a>JSP 自定义标签</h3><p>自定义标签是用户定义的 JSP 语言元素。当 JSP 页面包含一个自定义标签时将被转化为 servlet，标签转化为对被 称为 tag handler 的对象的操作，即当 servlet 执行时 Web container 调用那些操作。</p>
<p>JSP 标签扩展可以让你创建新的标签并且可以直接插入到一个 JSP 页面。 JSP 2.0 规范中引入 Simple Tag Handlers 来编写这些自定义标记。</p>
<p>你可以继承 SimpleTagSupport 类并重写的 doTag()方法来开发一个最简单的自定义标签。</p>
<h3 id="创建”Hello”标签"><a href="#创建”Hello”标签" class="headerlink" title="创建”Hello”标签"></a>创建”Hello”标签</h3><p>接下来，我们想创建一个自定义标签叫作<ex:Hello>，标签格式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ex:Hello /&gt;</span><br></pre></td></tr></table></figure>
<p>要创建自定义的 JSP 标签，你首先必须创建处理标签的 Java 类。所以，让我们创建一个 HelloTag 类，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">package com.runoob; import javax.servlet.jsp.tagext.*; import</span><br><span class="line">javax.servlet.jsp.*; import java.io.*; public class HelloTag extends</span><br><span class="line">SimpleTagSupport &#123; public void doTag() throws JspException, IOException &#123;</span><br><span class="line">JspWriter out = getJspContext().getOut(); out.println(&quot;Hello Custom Tag!&quot;); &#125; &#125;</span><br></pre></td></tr></table></figure>
<p>以下代码重写了 doTag()方法，方法中使用了 getJspContext()方法来获取当前的 JspContext 对象，并将”Hello Custom Tag!”传递给 JspWriter 对象。</p>
<p>编译以上类，并将其复制到环境变量 CLASSPATH 目录中。最后创建如下标签库：<code>&lt;Tomcat安装目录&gt;webapps\ROOT\WEB-INF\custom.tld</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;taglib&gt;</span><br><span class="line">  &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;</span><br><span class="line">  &lt;jsp-version&gt;2.0&lt;/jsp-version&gt;</span><br><span class="line">  &lt;short-name&gt;Example TLD&lt;/short-name&gt;</span><br><span class="line">  &lt;tag&gt;</span><br><span class="line">    &lt;name&gt;Hello&lt;/name&gt;</span><br><span class="line">    &lt;tag-class&gt;com.runoob.HelloTag&lt;/tag-class&gt;</span><br><span class="line">    &lt;body-content&gt;empty&lt;/body-content&gt;</span><br><span class="line">  &lt;/tag&gt;</span><br><span class="line">&lt;/taglib&gt;</span><br></pre></td></tr></table></figure>
<p>接下来，我们就可以在 JSP 文件中使用 Hello 标签：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;ex&quot; uri=&quot;WEB-INF/custom.tld&quot;%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;A sample custom tag&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;ex:Hello /&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>以上程序输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello Custom Tag!</span><br></pre></td></tr></table></figure>
<h3 id="访问标签体"><a href="#访问标签体" class="headerlink" title="访问标签体"></a>访问标签体</h3><p>你可以像标准标签库一样在标签中包含消息内容。如我们要在我们自定义的 Hello 中包含内容，格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ex:Hello&gt;</span><br><span class="line">  This is message body</span><br><span class="line">&lt;/ex:Hello&gt;</span><br></pre></td></tr></table></figure>
<p>我们可以修改标签处理类文件，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   StringWriter sw = <span class="keyword">new</span> StringWriter();</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> JspException, IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">       getJspBody().invoke(sw);</span><br><span class="line">       getJspContext().getOut().println(sw.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接下来我们需要修改 TLD 文件，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;taglib&gt;</span><br><span class="line">  &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;</span><br><span class="line">  &lt;jsp-version&gt;2.0&lt;/jsp-version&gt;</span><br><span class="line">  &lt;short-name&gt;Example TLD with Body&lt;/short-name&gt;</span><br><span class="line">  &lt;tag&gt;</span><br><span class="line">    &lt;name&gt;Hello&lt;/name&gt;</span><br><span class="line">    &lt;tag-class&gt;com.runoob.HelloTag&lt;/tag-class&gt;</span><br><span class="line">    &lt;body-content&gt;scriptless&lt;/body-content&gt;</span><br><span class="line">  &lt;/tag&gt;</span><br><span class="line">&lt;/taglib&gt;</span><br></pre></td></tr></table></figure>
<p>现在我们可以在 JSP 使用修改后的标签，如下所示:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;ex&quot; uri=&quot;WEB-INF/custom.tld&quot;%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;A sample custom tag&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;ex:Hello&gt;</span><br><span class="line">      This is message body</span><br><span class="line">    &lt;/ex:Hello&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>以上程序输出结果如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This is message body</span><br></pre></td></tr></table></figure>
<h3 id="自定义标签属性"><a href="#自定义标签属性" class="headerlink" title="自定义标签属性"></a>自定义标签属性</h3><p>你可以在自定义标准中设置各种属性，要接收属性，值自定义标签类必须实现 setter 方法， JavaBean 中的 setter 方法如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.message = msg;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   StringWriter sw = <span class="keyword">new</span> StringWriter();</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> JspException, IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (message != <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="comment">/* 从属性中使用消息 */</span></span><br><span class="line">          JspWriter out = getJspContext().getOut();</span><br><span class="line">          out.println( message );</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">/* 从内容体中使用消息 */</span></span><br><span class="line">          getJspBody().invoke(sw);</span><br><span class="line">          getJspContext().getOut().println(sw.toString());</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>属性的名称是”message”，所以 setter 方法是的 setMessage()。现在让我们在 TLD 文件中使用的<attribute>元素添加此属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;taglib&gt;</span><br><span class="line">  &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;</span><br><span class="line">  &lt;jsp-version&gt;2.0&lt;/jsp-version&gt;</span><br><span class="line">  &lt;short-name&gt;Example TLD with Body&lt;/short-name&gt;</span><br><span class="line">  &lt;tag&gt;</span><br><span class="line">    &lt;name&gt;Hello&lt;/name&gt;</span><br><span class="line">    &lt;tag-class&gt;com.runoob.HelloTag&lt;/tag-class&gt;</span><br><span class="line">    &lt;body-content&gt;scriptless&lt;/body-content&gt;</span><br><span class="line">    &lt;attribute&gt;</span><br><span class="line">      &lt;name&gt;message&lt;/name&gt;</span><br><span class="line">    &lt;/attribute&gt;</span><br><span class="line">  &lt;/tag&gt;</span><br><span class="line">&lt;/taglib&gt;</span><br></pre></td></tr></table></figure>
<p>现在我们就可以在 JSP 文件中使用 message 属性了，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;ex&quot; uri=&quot;WEB-INF/custom.tld&quot;%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;A sample custom tag&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;ex:Hello message=&quot;This is custom tag&quot; /&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>以上实例数据输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This is custom tag</span><br></pre></td></tr></table></figure>
<p>你还可以包含以下属性：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">属性</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">name</td>
<td style="text-align:left">定义属性的名称。每个标签的是属性名称必须是唯一的。</td>
</tr>
<tr>
<td style="text-align:left">required</td>
<td style="text-align:left">指定属性是否是必须的或者可选的,如果设置为 false 为可选。</td>
</tr>
<tr>
<td style="text-align:left">rtexprvalue</td>
<td style="text-align:left">声明在运行表达式时，标签属性是否有效。</td>
</tr>
<tr>
<td style="text-align:left">type</td>
<td style="text-align:left">定义该属性的 Java 类类型 。默认指定为<strong>String</strong></td>
</tr>
<tr>
<td style="text-align:left">description</td>
<td style="text-align:left">描述信息</td>
</tr>
<tr>
<td style="text-align:left">fragment</td>
<td style="text-align:left">如果声明了该属性,属性值将被视为一个<strong>JspFragment</strong>。</td>
</tr>
</tbody>
</table>
</div>
<p>以下是指定相关的属性实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line">&lt;attribute&gt;</span><br><span class="line">  &lt;name&gt;attribute_name&lt;/name&gt;</span><br><span class="line">  &lt;required&gt;false&lt;/required&gt;</span><br><span class="line">  &lt;type&gt;java.util.Date&lt;/type&gt;</span><br><span class="line">  &lt;fragment&gt;false&lt;/fragment&gt;</span><br><span class="line">&lt;/attribute&gt;</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>
<p>如果你使用了两个属性，修改 TLD 文件，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line">&lt;attribute&gt;</span><br><span class="line">  &lt;name&gt;attribute_name1&lt;/name&gt;</span><br><span class="line">  &lt;required&gt;false&lt;/required&gt;</span><br><span class="line">  &lt;type&gt;java.util.Boolean&lt;/type&gt;</span><br><span class="line">  &lt;fragment&gt;false&lt;/fragment&gt;</span><br><span class="line">&lt;/attribute&gt;</span><br><span class="line">&lt;attribute&gt;</span><br><span class="line">  &lt;name&gt;attribute_name2&lt;/name&gt;</span><br><span class="line">  &lt;required&gt;true&lt;/required&gt;</span><br><span class="line">  &lt;type&gt;java.util.Date&lt;/type&gt;</span><br><span class="line">&lt;/attribute&gt;</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://q1.qlogo.cn/g?b=qq&amp;nk=2877406366&amp;s=640" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://q1.qlogo.cn/g?b=qq&amp;nk=2877406366&amp;s=640" title="头像" alt="头像"></a><div class="post-copyright__author_name">REAI</div><div class="post-copyright__author_desc">遇见即是上上签</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.reaicc.com/posts/javajsp/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://blog.reaicc.com/posts/javajsp/')">JavaWeb 之 Jsp 指南</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/img/reward/wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/reward/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/reward/alipay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/reward/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.reaicc.com/posts/javajsp/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=JavaWeb 之 Jsp 指南&amp;url=https://blog.reaicc.com/posts/javajsp/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.reaicc.com" target="_blank">REAI</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Java/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Java<span class="tagsPageCount">39</span></a><a class="post-meta__box__tags" href="/tags/JavaWeb/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>JavaWeb<span class="tagsPageCount">11</span></a><a class="post-meta__box__tags" href="/tags/JSP/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>JSP<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://q1.qlogo.cn/g?b=qq&amp;nk=2877406366&amp;s=640" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://npm.onmicrosoft.cn/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://npm.onmicrosoft.cn/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/javamj/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JavaWeb 面经</div></div></a></div><div class="next-post pull-right"><a href="/posts/javafwq/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JavaWeb 之 Servlet 指南</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/hcck/" title="JavaWeb 之 Cookie 和 Session"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2020-08-24</div><div class="title">JavaWeb 之 Cookie 和 Session</div></div></a></div><div><a href="/posts/javaglq/" title="JavaWeb 之 Filter 和 Listener"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2020-08-24</div><div class="title">JavaWeb 之 Filter 和 Listener</div></div></a></div><div><a href="/posts/javafwq/" title="JavaWeb 之 Servlet 指南"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2020-08-24</div><div class="title">JavaWeb 之 Servlet 指南</div></div></a></div><div><a href="/posts/javamj/" title="JavaWeb 面经"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2020-02-07</div><div class="title">JavaWeb 面经</div></div></a></div><div><a href="/pages/9ecdc1/" title="Jetty 快速入门"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-02-17</div><div class="title">Jetty 快速入门</div></div></a></div><div><a href="/pages/6c22f4/" title="Tomcat优化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-02-17</div><div class="title">Tomcat优化</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div></div><div class="comment-wrap"><div><div id="artalk-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://q1.qlogo.cn/g?b=qq&amp;nk=2877406366&amp;s=640" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" ait="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(/img/qrcode_gzh.jpg) center center / 100% no-repeat"></div></div></div></div><div class="card-widget" id="newYear"><div class="item-headline"><i></i><span></span></div><div class="item-content"><div id="newYear-main"><div class="mask"></div> <p class="title"></p> <div class="newYear-time"></div> <p class="today" style="text-align: right;"></p> </div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaWeb-%E4%B9%8B-Jsp-%E6%8C%87%E5%8D%97"><span class="toc-number">1.</span> <span class="toc-text">JavaWeb 之 Jsp 指南</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-Java-Server-Pages"><span class="toc-number">1.1.1.</span> <span class="toc-text">什么是 Java Server Pages</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8-JSP"><span class="toc-number">1.1.2.</span> <span class="toc-text">为什么使用 JSP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">1.1.3.</span> <span class="toc-text">JSP 的优势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSP-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text">JSP 工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">1.2.1.</span> <span class="toc-text">JSP 工作流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">工作步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.2.2.</span> <span class="toc-text">JSP 生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JSP-%E7%BC%96%E8%AF%91"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">JSP 编译</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JSP-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">JSP 初始化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JSP-%E6%89%A7%E8%A1%8C"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">JSP 执行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JSP-%E6%B8%85%E7%90%86"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">JSP 清理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.</span> <span class="toc-text">语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC"><span class="toc-number">1.3.1.</span> <span class="toc-text">脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E6%96%87%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">中文编码问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E5%A3%B0%E6%98%8E"><span class="toc-number">1.3.2.</span> <span class="toc-text">JSP 声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.3.3.</span> <span class="toc-text">JSP 表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E6%B3%A8%E9%87%8A"><span class="toc-number">1.3.4.</span> <span class="toc-text">JSP 注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.3.5.</span> <span class="toc-text">控制语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#if%E2%80%A6else-%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">if…else 语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#switch%E2%80%A6case-%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">switch…case 语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.3.5.3.</span> <span class="toc-text">循环语句</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E5%AD%97%E9%9D%A2%E9%87%8F"><span class="toc-number">1.3.6.</span> <span class="toc-text">JSP 字面量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.</span> <span class="toc-text">指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Page-%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.1.</span> <span class="toc-text">Page 指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Include-%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.2.</span> <span class="toc-text">Include 指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Taglib-%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.3.</span> <span class="toc-text">Taglib 指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSP-%E5%8A%A8%E4%BD%9C%E5%85%83%E7%B4%A0"><span class="toc-number">1.5.</span> <span class="toc-text">JSP 动作元素</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">1.5.1.</span> <span class="toc-text">常见的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-include-gt"><span class="toc-number">1.5.2.</span> <span class="toc-text">&lt;jsp:include&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-useBean-gt"><span class="toc-number">1.5.3.</span> <span class="toc-text">&lt;jsp:useBean&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-setProperty-gt"><span class="toc-number">1.5.4.</span> <span class="toc-text">&lt;jsp:setProperty&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-getProperty-gt"><span class="toc-number">1.5.5.</span> <span class="toc-text">&lt;jsp:getProperty&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-forward-gt"><span class="toc-number">1.5.6.</span> <span class="toc-text">&lt;jsp:forward&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-plugin-gt"><span class="toc-number">1.5.7.</span> <span class="toc-text">&lt;jsp:plugin&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-element-gt-%E3%80%81-lt-jsp-attribute-gt-%E3%80%81-lt-jsp-body-gt"><span class="toc-number">1.5.8.</span> <span class="toc-text">&lt;jsp:element&gt; 、 &lt;jsp:attribute&gt;、&lt;jsp:body&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-text-gt"><span class="toc-number">1.5.9.</span> <span class="toc-text">&lt;jsp:text&gt;</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSP-%E9%9A%90%E5%BC%8F%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.</span> <span class="toc-text">JSP 隐式对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#request-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.1.</span> <span class="toc-text">request 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#response-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.2.</span> <span class="toc-text">response 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#out-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.3.</span> <span class="toc-text">out 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.4.</span> <span class="toc-text">session 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#application-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.5.</span> <span class="toc-text">application 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#config-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.6.</span> <span class="toc-text">config 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pageContext-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.7.</span> <span class="toc-text">pageContext 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#page-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.8.</span> <span class="toc-text">page 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exception-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.9.</span> <span class="toc-text">exception 对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EL-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.7.</span> <span class="toc-text">EL 表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">1.7.1.</span> <span class="toc-text">一个简单的语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EL-%E4%B8%AD%E7%9A%84%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">1.7.2.</span> <span class="toc-text">EL 中的基础操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-EL-%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.7.3.</span> <span class="toc-text">JSP EL 中的函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-EL-%E9%9A%90%E5%90%AB%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.7.4.</span> <span class="toc-text">JSP EL 隐含对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pageContext-%E5%AF%B9%E8%B1%A1-1"><span class="toc-number">1.7.5.</span> <span class="toc-text">pageContext 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scope-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.7.6.</span> <span class="toc-text">Scope 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#param-%E5%92%8C-paramValues-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.7.7.</span> <span class="toc-text">param 和 paramValues 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#header-%E5%92%8C-headerValues-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.7.8.</span> <span class="toc-text">header 和 headerValues 对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSTL"><span class="toc-number">1.8.</span> <span class="toc-text">JSTL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSTL-%E5%BA%93%E5%AE%89%E8%A3%85"><span class="toc-number">1.8.1.</span> <span class="toc-text">JSTL 库安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.2.</span> <span class="toc-text">核心标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.3.</span> <span class="toc-text">格式化标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL-%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.4.</span> <span class="toc-text">SQL 标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XML-%E6%A0%87%E7%AD%BE"><span class="toc-number">1.8.5.</span> <span class="toc-text">XML 标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSTL-%E5%87%BD%E6%95%B0"><span class="toc-number">1.8.6.</span> <span class="toc-text">JSTL 函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Taglib"><span class="toc-number">1.9.</span> <span class="toc-text">Taglib</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE"><span class="toc-number">1.9.1.</span> <span class="toc-text">JSP 自定义标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E2%80%9DHello%E2%80%9D%E6%A0%87%E7%AD%BE"><span class="toc-number">1.9.2.</span> <span class="toc-text">创建”Hello”标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%A0%87%E7%AD%BE%E4%BD%93"><span class="toc-number">1.9.3.</span> <span class="toc-text">访问标签体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE%E5%B1%9E%E6%80%A7"><span class="toc-number">1.9.4.</span> <span class="toc-text">自定义标签属性</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/58328/" title="发布一个npm包">发布一个npm包</a><time datetime="2024-06-04T22:08:41.090Z" title="发表于 2024-06-05 06:08:41">2024-06-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/48591/" title="HTTP:报文，缓存，Cookie与HTTPS">HTTP:报文，缓存，Cookie与HTTPS</a><time datetime="2024-06-04T22:05:46.160Z" title="发表于 2024-06-05 06:05:46">2024-06-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/35707/" title="Linux命令之文件与权限管理">Linux命令之文件与权限管理</a><time datetime="2024-06-04T21:58:39.201Z" title="发表于 2024-06-05 05:58:39">2024-06-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/64074/" title="Git关联Github和码云并利用IDEA内置工具">Git关联Github和码云并利用IDEA内置工具</a><time datetime="2024-06-04T21:52:50.241Z" title="发表于 2024-06-05 05:52:50">2024-06-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/11097/" title="数据库影响因素之硬件、存储引擎和事务">数据库影响因素之硬件、存储引擎和事务</a><time datetime="2024-06-04T21:43:10.296Z" title="发表于 2024-06-05 05:43:10">2024-06-05</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:2877406366@qq.com" title="email"><i class="anzhiyufont anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://weibo.com" title="微博"><i class="anzhiyufont anzhiyufont anzhiyu-icon-weibo"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://www.facebook.com/profile.php" title="facebook"><i class="anzhiyufont anzhiyufont anzhiyu-icon-facebook1"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://q1.qlogo.cn/g?b=qq&amp;nk=2877406366&amp;s=640" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/" title="Github"><i class="anzhiyufont anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com" title="Bilibili"><i class="anzhiyufont anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://www.douyin.com/user/MS4wLjABAAAARlF7u0o6BTIX0KiHreekyz5_nqDUauZDgG6AtnpESAI" title="抖音"><i class="anzhiyufont anzhiyufont anzhiyu-icon-tiktok"></i></a></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener" href="https://github.com/travellings-link/travellings">开往</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" href="/docs/">文档</a><a class="footer-item" title="源码" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">源码</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="REAI" target="_blank">REAI</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" title="京ICP备2023019859号-1">京ICP备2023019859号-1</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">71</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">64</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">29</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://music.reaicc.com/" title="网易云音乐"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/wangyiyun.png" alt="网易云音乐"/><span class="back-menu-item-text">网易云音乐</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://news.reaicc.com/" title="每日早报"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://news.reaicc.com/favicon.svg" alt="每日早报"/><span class="back-menu-item-text">每日早报</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/friends/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/?id=6709358233&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/notice/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 时间轴</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Ant/" style="font-size: 0.88rem;">Ant<sup>1</sup></a><a href="/tags/Cookie/" style="font-size: 0.88rem;">Cookie<sup>2</sup></a><a href="/tags/Dozer/" style="font-size: 0.88rem;">Dozer<sup>1</sup></a><a href="/tags/Filter/" style="font-size: 0.88rem;">Filter<sup>1</sup></a><a href="/tags/Freemark/" style="font-size: 0.88rem;">Freemark<sup>1</sup></a><a href="/tags/Freenom/" style="font-size: 0.88rem;">Freenom<sup>1</sup></a><a href="/tags/HTTPS/" style="font-size: 0.88rem;">HTTPS<sup>1</sup></a><a href="/tags/Html/" style="font-size: 0.88rem;">Html<sup>1</sup></a><a href="/tags/JSP/" style="font-size: 0.88rem;">JSP<sup>1</sup></a><a href="/tags/Java/" style="font-size: 0.88rem;">Java<sup>39</sup></a><a href="/tags/JavaBean/" style="font-size: 0.88rem;">JavaBean<sup>2</sup></a><a href="/tags/JavaWeb/" style="font-size: 0.88rem;">JavaWeb<sup>11</sup></a><a href="/tags/Jetty/" style="font-size: 0.88rem;">Jetty<sup>2</sup></a><a href="/tags/Jsoup/" style="font-size: 0.88rem;">Jsoup<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>8</sup></a><a href="/tags/Listener/" style="font-size: 0.88rem;">Listener<sup>1</sup></a><a href="/tags/Lombok/" style="font-size: 0.88rem;">Lombok<sup>1</sup></a><a href="/tags/Maven/" style="font-size: 0.88rem;">Maven<sup>6</sup></a><a href="/tags/Mybatis-Plus/" style="font-size: 0.88rem;">Mybatis Plus<sup>1</sup></a><a href="/tags/Reflections/" style="font-size: 0.88rem;">Reflections<sup>1</sup></a><a href="/tags/Servlet/" style="font-size: 0.88rem;">Servlet<sup>2</sup></a><a href="/tags/Session/" style="font-size: 0.88rem;">Session<sup>1</sup></a><a href="/tags/Thumbnailator/" style="font-size: 0.88rem;">Thumbnailator<sup>1</sup></a><a href="/tags/Thymeleaf/" style="font-size: 0.88rem;">Thymeleaf<sup>1</sup></a><a href="/tags/Tomcat/" style="font-size: 0.88rem;">Tomcat<sup>6</sup></a><a href="/tags/Velocity/" style="font-size: 0.88rem;">Velocity<sup>1</sup></a><a href="/tags/ZXing/" style="font-size: 0.88rem;">ZXing<sup>1</sup></a><a href="/tags/css/" style="font-size: 0.88rem;">css<sup>1</sup></a><a href="/tags/flex/" style="font-size: 0.88rem;">flex<sup>1</sup></a><a href="/tags/git/" style="font-size: 0.88rem;">git<sup>1</sup></a><a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 0.88rem;">反射<sup>1</sup></a><a href="/tags/%E5%9B%BE%E5%BD%A2%E5%A4%84%E7%90%86/" style="font-size: 0.88rem;">图形处理<sup>1</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7%E5%8C%85/" style="font-size: 0.88rem;">工具包<sup>1</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">教程<sup>8</sup></a><a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 0.88rem;">日志<sup>1</sup></a><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 0.88rem;">服务器<sup>6</sup></a><a href="/tags/%E6%9D%A1%E5%BD%A2%E7%A0%81/" style="font-size: 0.88rem;">条形码<sup>1</sup></a><a href="/tags/%E6%9E%84%E5%BB%BA/" style="font-size: 0.88rem;">构建<sup>7</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/" style="font-size: 0.88rem;">模板引擎<sup>3</sup></a><a href="/tags/%E9%82%AE%E4%BB%B6/" style="font-size: 0.88rem;">邮件<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="6709358233" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="none"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/playlist?id=6709358233&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="https://npm.onmicrosoft.cn/hexo-tool-cc@1.1.4/source/js/utils.js"></script><script src="https://npm.onmicrosoft.cn/hexo-tool-cc@1.1.4/source/js/main.js"></script><script src="https://npm.onmicrosoft.cn/hexo-theme-anzhiyu@1.6.8/source/js/tw_cn.js"></script><script src="https://npm.onmicrosoft.cn/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://npm.onmicrosoft.cn/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://npm.onmicrosoft.cn/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://npm.onmicrosoft.cn/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><script>(() => {
  const initArtalk = () => {
    window.artalkItem = new Artalk(Object.assign({
      el: '#artalk-wrap',
      server: 'https://artalk.reaicc.com',
      site: 'blog.reaicc.com',
      pageKey: location.pathname,
      darkMode: document.documentElement.getAttribute('data-theme') === 'dark',
      countEl: '.artalk-count',
      emoticons: [
        "https://artalk.reaicc.com/static/images/artalk.json",
        "https://emotion-new.acs.pw/aru/artalk.json"
      ]
    },null))

    if (GLOBAL_CONFIG.lightbox === 'null') return
    window.artalkItem.use(ctx => {
      ctx.on('list-loaded', () => {
        ctx.getCommentList().forEach(comment => {
          const $content = comment.getRender().$content
          anzhiyu.loadLightbox($content.querySelectorAll('img:not([atk-emoticon])'))
        })
      })
    })
  }

  const loadArtalk = async () => {
    if (typeof window.artalkItem === 'object') initArtalk()
    else {
      await getCSS('https://npm.onmicrosoft.cn/artalk@2.5.5/dist/Artalk.css')
      await getScript('https://npm.onmicrosoft.cn/artalk@2.5.5/dist/Artalk.js')
      initArtalk()
    }
  }

  const artalkChangeMode = theme => {
    const artalkWrap = document.getElementById('artalk-wrap')
    if (!(artalkWrap && artalkWrap.children.length)) return
    const isDark = theme === 'dark'
    window.artalkItem.setDarkMode(isDark)
  }


  anzhiyu.addGlobalFn('themeChange', artalkChangeMode, 'artalk')
  
  if ('Artalk' === 'Artalk' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('artalk-wrap'), loadArtalk)
    else loadArtalk()
  } else {
    window.loadOtherComment = loadArtalk
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getSetting = async () => {
    try {
      const res = await fetch('https://artalk.reaicc.com/api/conf', { method: 'GET' })
      return await res.json()
    } catch (e) {
      console.log(e)
    }
  }

  const headerList = {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded',
      'Origin': window.location.origin
    },
    body: new URLSearchParams({
      'site_name': 'blog.reaicc.com',
      'limit': '6',
      'type':'latest_comments'
    })
  }

  const getComment = async () => {
    try {
      const res = await fetch('https://artalk.reaicc.com/api/stat', headerList)
      const result = await res.json()
      const avatarStr = await getSetting()
      const { mirror, params, default:defaults } = avatarStr.data.frontend_conf.gravatar
      const avatarCdn = false || mirror
      let avatarDefault = false || params || defaults
      avatarDefault = avatarDefault.startsWith('d=') ? avatarDefault : `d=${avatarDefault}`
      const artalk = result.data.map(function (e) {
        return {
          'avatar': `${avatarCdn}${e.email_encrypted}?${avatarDefault}`,
          'content': changeContent(e.content_marked),
          'nick': e.nick,
          'url': e.page_url,
          'date': e.date,
        }
      })
      saveToLocal.set('artalk-newest-comments', JSON.stringify(artalk), 10/(60*24))
      generateHtml(artalk)
    } catch (e) {
      console.log(e)
      const $dom = document.querySelector('#card-newest-comments .aside-list')
      $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
    }
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('artalk-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://npm.onmicrosoft.cn/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://npm.onmicrosoft.cn/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script src="/js/fjGallery.min.js"></script><script>!function(p){"use strict";!function(t){var s=window,e=document,i=p,c="".concat("https:"===e.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),n=e.createElement("script"),r=e.getElementsByTagName("script")[0];n.type="text/javascript",n.setAttribute("charset","UTF-8"),n.async=!0,n.src=c,n.id="LA_COLLECT",i.d=n;var o=function(){s.LA.ids.push(i)};s.LA?s.LA.ids&&o():(s.LA=p,s.LA.ids=[],o()),r.parentNode.insertBefore(n,r)}()}({id:"JrxUXpJaHkoUhitk",ck:"JrxUXpJaHkoUhitk"});</script><script src="https://unpkg.com/artalk@2.4.4/dist/Artalk.js"></script><script src="/js/bgCh.js"></script><script src="/shuoshuo/coco-message.js"></script><link rel="stylesheet" href="https://npm.onmicrosoft.cn/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://npm.onmicrosoft.cn/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://npm.onmicrosoft.cn/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://npm.onmicrosoft.cn/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/link/"]):not([href="/friends/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://npm.onmicrosoft.cn/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>